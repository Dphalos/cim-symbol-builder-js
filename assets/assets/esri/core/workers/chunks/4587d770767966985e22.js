"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1368],{84552:(e,t,i)=>{i.d(t,{Z:()=>c});var r,n=i(43697),l=i(10736),a=i(35463),s=i(5600),o=(i(67676),i(80442),i(75215),i(52011)),u=i(78981);let d=r=class extends l.wq{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,a.rJ)(this.value,this.unit,"milliseconds")}clone(){return new r({value:this.value,unit:this.unit})}};(0,n._)([(0,s.Cb)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),(0,n._)([(0,s.Cb)({type:u.v.apiValues,json:{type:u.v.jsonValues,read:u.v.read,write:u.v.write},nonNullable:!0})],d.prototype,"unit",void 0),d=r=(0,n._)([(0,o.j)("esri.TimeInterval")],d);const c=d},91040:(e,t,i)=>{i.d(t,{yZ:()=>n});var r=i(67900);function n(e,t){const i=t||e.extent,n=e.width,l=(0,r.c9)(i&&i.spatialReference);return i&&n?i.width/n*l*r.hd*96:0}},16859:(e,t,i)=>{i.d(t,{I:()=>w});var r=i(43697),n=i(40330),l=i(3172),a=i(66643),s=i(20102),o=i(92604),u=i(70586),d=i(95330),c=i(17452),m=i(5600),p=(i(67676),i(80442),i(75215),i(71715)),f=i(52011),y=i(30556),v=i(65587),h=i(15235),g=i(86082);const I=o.Z.getLogger("esri.layers.mixins.PortalLayer"),w=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new h.default({id:t.itemId,portal:i&&i.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const r=await i.e(8062).then(i.bind(i,18062));return(0,d.k_)(t),await r.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw(0,d.D_)(e)||I.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(e).catch((e=>((0,d.r9)(e),!0))))}async fetchUserHasEditingPrivileges(e){const t=this.url?null==n.id?void 0:n.id.findCredential(this.url):null;if(!t)return!0;const i=_.credential===t?_.user:await this.fetchEditingUser(e);return _.credential=t,_.user=i,(0,u.Wi)(i)||null==i.privileges||i.privileges.includes("features:user:edit")}async fetchEditingUser(e){var t,i;const r=null==(t=this.portalItem)||null==(i=t.portal)?void 0:i.user;if(r)return r;const s=n.id.findServerInfo(this.url);if(null==s||!s.owningSystemUrl)return null;const o=`${s.owningSystemUrl}/sharing/rest`,d=v.Z.getDefault();if(d&&d.loaded&&(0,c.Fv)(d.restUrl)===(0,c.Fv)(o))return d.user;const m=`${o}/community/self`,p=(0,u.pC)(e)?e.signal:null,f=await(0,a.q6)((0,l.default)(m,{authMode:"no-prompt",query:{f:"json"},signal:p}));return f.ok?g.default.fromJSON(f.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t&&t.portal,r=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||v.Z.getDefault());return i&&r&&!(0,c.tm)(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new s.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r._)([(0,m.Cb)({type:h.default})],t.prototype,"portalItem",null),(0,r._)([(0,p.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,r._)([(0,y.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,r._)([(0,m.Cb)()],t.prototype,"resourceReferences",void 0),(0,r._)([(0,m.Cb)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,r._)([(0,f.j)("esri.layers.mixins.PortalLayer")],t),t},_={credential:null,user:null}},28294:(e,t,i)=>{i.d(t,{n:()=>m});var r=i(43697),n=i(92835),l=i(84552),a=i(5600),s=(i(67676),i(80442),i(75215),i(71715)),o=i(52011),u=i(30547),d=i(35671),c=i(78981);const m=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,n=c.v.fromJSON(i.timeOffsetUnits);return r&&n?new l.Z({value:r,unit:n}):null}set timeInfo(e){(0,d.UF)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,a.Cb)({type:n.Z,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,a.Cb)({type:l.Z})],t.prototype,"timeOffset",void 0),(0,r._)([(0,s.r)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,a.Cb)({value:null,type:u.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,a.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,o.j)("esri.layers.mixins.TemporalLayer")],t),t}},30547:(e,t,i)=>{i.d(t,{Z:()=>I});var r,n=i(43697),l=i(92835),a=i(84552),s=i(10736),o=i(22974),u=i(70586),d=i(5600),c=(i(75215),i(71715)),m=i(52011),p=i(30556);i(67676),i(80442);let f=r=class extends s.wq{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new r({respectsDaylightSaving:e,timezone:t})}};(0,n._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"respectsDaylightSaving",void 0),(0,n._)([(0,c.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],f.prototype,"readRespectsDaylightSaving",null),(0,n._)([(0,d.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],f.prototype,"timezone",void 0),f=r=(0,n._)([(0,m.j)("esri.layers.support.TimeReference")],f);const y=f;var v,h=i(78981);let g=v=class extends s.wq{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new l.Z({start:i,end:r})}writeFullTimeExtent(e,t){e&&(0,u.pC)(e.start)&&(0,u.pC)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new a.Z({value:t.timeInterval,unit:h.v.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new a.Z({value:t.defaultTimeInterval,unit:h.v.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:l,fullTimeExtent:a,trackIdField:s,useTime:u}=this;return new v({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:(0,o.d9)(l),fullTimeExtent:(0,o.d9)(a),trackIdField:s,useTime:u})}};(0,n._)([(0,d.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],g.prototype,"cumulative",void 0),(0,n._)([(0,d.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],g.prototype,"endField",void 0),(0,n._)([(0,d.Cb)({type:l.Z,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"fullTimeExtent",void 0),(0,n._)([(0,c.r)("fullTimeExtent",["timeExtent"])],g.prototype,"readFullTimeExtent",null),(0,n._)([(0,p.c)("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null),(0,n._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"hasLiveData",void 0),(0,n._)([(0,d.Cb)({type:a.Z,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"interval",void 0),(0,n._)([(0,c.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],g.prototype,"readInterval",null),(0,n._)([(0,p.c)("interval")],g.prototype,"writeInterval",null),(0,n._)([(0,d.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],g.prototype,"startField",void 0),(0,n._)([(0,d.Cb)({type:y,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"timeReference",void 0),(0,n._)([(0,d.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],g.prototype,"trackIdField",void 0),(0,n._)([(0,d.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],g.prototype,"useTime",void 0),g=v=(0,n._)([(0,m.j)("esri.layers.support.TimeInfo")],g);const I=g},35671:(e,t,i)=>{i.d(t,{io:()=>v,AB:()=>y,gd:()=>f,Q0:()=>p,YN:()=>u,UF:()=>c,O5:()=>h,os:()=>I,H7:()=>U,qN:()=>O,Pz:()=>A,Qc:()=>$,vP:()=>Z}),i(20102);var r,n,l=i(78286);(n=r||(r={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var a=i(59266);const s=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],o=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(d(s,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)d(o,e,t)}function d(e,t,i){if(e)for(const r of e){const e=(0,l.hS)(r,t),n=e&&"function"!=typeof e&&i.get(e);n&&(0,l.RB)(r,n.name,t)}}function c(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const m=new Set;function p(e,t){return e&&t?(m.clear(),f(m,e,t),Array.from(m).sort()):[]}function f(e,t,i){var r;if(i)if(null!=t&&null!=(r=t.fields)&&r.length)if(i.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const r of i)y(e,t,r);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function y(e,t,i){if("string"==typeof i)if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}async function v(e,t,i){var r;if(!i)return;const{arcadeUtils:n}=await(0,a.LC)(),l=n.extractFieldNames(i,null==t||null==(r=t.fields)?void 0:r.map((e=>e.name)));for(const i of l)y(e,t,i)}function h({displayField:e,fields:t}){return e||(t&&t.length?g(t,"name-or-title")||g(t,"unique-identifier")||g(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function g(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}function I(e){const t=e.defaultValue;return void 0!==t&&D(e,t)?t:e.nullable?null:void 0}function w(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function _(e){return null===e||w(e)}const T="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function F(e){return null===e||T(e)}function b(e){return null!=e&&"string"==typeof e}function x(e){return null===e||b(e)}function S(){return!0}function D(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?F:T;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?_:w;break;case"string":case"esriFieldTypeString":i=e.nullable?x:b;break;default:i=S}return 1===arguments.length?i:i(t)}const E=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function U(e){return null!=e&&E.has(e.type)}function O(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var N,C;function A(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function $(e,t){return e.nullable&&null===t?null:U(e)&&!function(e,t){const i="string"==typeof e?L(e):e;return!!i&&(i.isInteger?T(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?N.OUT_OF_RANGE:D(e,t)?e.domain?function(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>n)return r.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return r.INVALID_CODED_VALUE}return null}(e.domain,t):null:C.INVALID_TYPE}function L(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return V;case"esriFieldTypeInteger":case"integer":return R;case"esriFieldTypeSingle":case"single":return j;case"esriFieldTypeDouble":case"double":return P}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(N||(N={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(C||(C={}));const V={min:-32768,max:32767,isInteger:!0},R={min:-2147483648,max:2147483647,isInteger:!0},j={min:-34e37,max:12e37,isInteger:!1},P={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Z(e,t,i){switch(e){case r.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case r.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case C.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case N.OUT_OF_RANGE:{const{min:e,max:r}=L(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}},78981:(e,t,i)=>{i.d(t,{v:()=>r});const r=(0,i(35454).wY)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},59266:(e,t,i)=>{i.d(t,{mz:()=>d,pp:()=>u,WW:()=>s,Yi:()=>o,LC:()=>a}),i(66577);var r=i(70586),n=i(82971);let l;function a(){return l||(l=(async()=>{const e=await Promise.all([i.e(9490),i.e(6690)]).then(i.bind(i,96690));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),l}const s=(e,t,i)=>d.create(e,t,i,null,["$feature"]),o=(e,t,i)=>d.create(e,t,i,null,["$feature","$view"]),u=(e,t,i,r)=>d.create(e,t,i,r,["$feature","$view"]);class d{constructor(e,t,i,r,n,l,a,s){this.script=e,this.evaluate=n;const o=Array.isArray(a)?a:a.fields;this.fields=o,this._syntaxTree=r,this._arcade=t,this._arcadeDictionary=i,this._arcadeFeature=l,this._spatialReference=s,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,l,s,o){const{arcade:u,Feature:c,Dictionary:m}=await a(),p=n.Z.fromJSON(t),f=u.parseScript(e,o),y=s.reduce(((e,t)=>({...e,[t]:null})),{});let v=null;(0,r.pC)(l)&&(v=new m(l),v.immutable=!0,y.$config=null);const h=u.scriptUsesGeometryEngine(f)&&u.enableGeometrySupport(),g=u.scriptUsesFeatureSet(f)&&u.enableFeatureSetSupport(),I=u.scriptIsAsync(f)&&u.enableAsyncSupport(),w={vars:y,spatialReference:p,useAsync:!!I},_=new m;_.immutable=!1,_.setField("scale",0);const T=u.compileScript(f,w);return await Promise.all([h,g,I]),new d(e,u,m,f,(e=>("$view"in e&&e.$view&&(_.setField("scale",e.$view.scale),e.$view=_),v&&(e.$config=v),T({vars:e,spatialReference:p}))),new c,i,p)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}}}]);