"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2921,3172],{22303:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(35270),n=r(22021),s=r(70586),o=r(75215);function a(e){return(0,n.uZ)((0,o.vU)(e),0,255)}function l(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class u{constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}static blendColors(e,t,r,i=new u){return i.r=Math.round(e.r+(t.r-e.r)*r),i.g=Math.round(e.g+(t.g-e.g)*r),i.b=Math.round(e.b+(t.b-e.b)*r),i.a=e.a+(t.a-e.a)*r,i._sanitize()}static fromRgb(e,t){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const e=r[2].split(/\s*,\s*/),n=r[1];if("rgb"===n&&3===e.length||"rgba"===n&&4===e.length){const r=e[0];if("%"===r.charAt(r.length-1)){const r=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(r[3]=parseFloat(e[3])),u.fromArray(r,t)}return u.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===n&&3===e.length||"hsla"===n&&4===e.length)return u.fromArray((0,i.B7)(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new u){if(4!==e.length&&7!==e.length||"#"!==e[0])return null;const r=4===e.length?4:8,i=(1<<r)-1;let n=Number("0x"+e.substr(1));return isNaN(n)?null:(["b","g","r"].forEach((e=>{const s=n&i;n>>=r,t[e]=4===r?17*s:s})),t.a=1,t)}static fromArray(e,t=new u){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const r=(0,i.h$)(e);return r&&u.fromArray(r,t)||u.fromRgb(e,t)||u.fromHex(e,t)}static fromJSON(e){return e&&new u([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return(0,s.pC)(e)?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return(0,s.pC)(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){if("string"==typeof e)u.fromString(e,this);else if(Array.isArray(e))u.fromArray(e,this);else{var t,r,i,n;this._set(null!=(t=e.r)?t:0,null!=(r=e.g)?r:0,null!=(i=e.b)?i:0,null!=(n=e.a)?n:1),e instanceof u||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}`}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const t=a(this.r),r=a(this.g),i=a(this.b);return 0===e||1!==this.a?[t,r,i,a(255*this.a)]:[t,r,i]}clone(){return new u(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(l(this.r,0,255)),this.g=Math.round(l(this.g,0,255)),this.b=Math.round(l(this.b,0,255)),this.a=l(this.a,0,1),this}_set(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i}}u.prototype.declaredClass="esri.Color"},92835:(e,t,r)=>{r.d(t,{Z:()=>m});var i,n=r(43697),s=r(10736),o=r(70586),a=r(35463),l=r(5600),u=(r(67676),r(80442),r(75215),r(71715)),c=r(52011),h=r(30556);let d=i=class extends s.wq{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return p}static get empty(){return f}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=(0,o.pC)(this.start)?this.start.getTime():this.start,r=(0,o.pC)(this.end)?this.end.getTime():this.end,i=(0,o.pC)(e.start)?e.start.getTime():e.start,n=(0,o.pC)(e.end)?e.end.getTime():e.end;return t===i&&r===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=(0,o.Po)(this.start,(t=>(0,a.JE)(t,e))),r=(0,o.Po)(this.end,(t=>(0,a.Nm)((0,a.JE)(t,e),1,e)));return new i({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=(0,o.R2)(this.start,-1/0,(e=>e.getTime())),r=(0,o.R2)(this.end,1/0,(e=>e.getTime())),n=(0,o.R2)(e.start,-1/0,(e=>e.getTime())),s=(0,o.R2)(e.end,1/0,(e=>e.getTime()));let a,l;if(n>=t&&n<=r?a=n:t>=n&&t<=s&&(a=t),r>=n&&r<=s?l=r:s>=t&&s<=r&&(l=s),!isNaN(a)&&!isNaN(l)){const e=new i;return e.start=a===-1/0?null:new Date(a),e.end=l===1/0?null:new Date(l),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new i,{start:n,end:s}=this;return(0,o.pC)(n)&&(r.start=(0,a.Nm)(n,e,t)),(0,o.pC)(s)&&(r.end=(0,a.Nm)(s,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return p.clone();const t=(0,o.pC)(this.start)&&(0,o.pC)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=(0,o.pC)(this.end)&&(0,o.pC)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};(0,n._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),(0,n._)([(0,u.r)("end")],d.prototype,"readEnd",null),(0,n._)([(0,h.c)("end")],d.prototype,"writeEnd",null),(0,n._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),(0,n._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),(0,n._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),(0,n._)([(0,u.r)("start")],d.prototype,"readStart",null),(0,n._)([(0,h.c)("start")],d.prototype,"writeStart",null),d=i=(0,n._)([(0,c.j)("esri.TimeExtent")],d);const p=new d,f=new d({start:void 0,end:void 0}),m=d},99880:(e,t,r)=>{r.d(t,{V:()=>l});var i=r(68773),n=(r(3172),r(20102)),s=r(92604),o=r(17452);const a=s.Z.getLogger("esri.assets");function l(e){if(!i.Z.assetsPath)throw a.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new n.Z("assets:path-not-set","config.assetsPath is not set");return(0,o.v_)(i.Z.assetsPath,e)}},46851:(e,t,r)=>{r.d(t,{E:()=>i,R:()=>n});const i=1e-6,n=Math.random,s=Math.PI/180,o=180/Math.PI;Object.freeze({__proto__:null,EPSILON:i,RANDOM:n,toRadian:function(e){return e*s},toDegree:function(e){return e*o},equals:function(e,t){return Math.abs(e-t)<=i*Math.max(1,Math.abs(e),Math.abs(t))}})},46521:(e,t,r)=>{function i(){return[1,0,0,0,1,0,0,0,1]}function n(e,t){return new Float64Array(e,t,9)}r.d(t,{a:()=>n,c:()=>i}),Object.freeze({__proto__:null,create:i,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,r,i,n,s,o,a,l){return[e,t,r,i,n,s,o,a,l]},createView:n})},52138:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>u,d:()=>p,e:()=>s,f:()=>d,g:()=>_,h:()=>b,i:()=>a,m:()=>c,o:()=>f,q:()=>v,s:()=>o,t:()=>h});var i=r(65617),n=r(46851);function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,r,i,n,s,o,a,l,u,c,h,d,p,f,m,g){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=h,e[11]=d,e[12]=p,e[13]=f,e[14]=m,e[15]=g,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function u(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],b=r*a-i*o,_=r*l-n*o,v=r*u-s*o,w=i*l-n*a,M=i*u-s*a,x=n*u-s*l,S=c*m-h*f,C=c*g-d*f,T=c*y-p*f,E=h*g-d*m,j=h*y-p*m,L=d*y-p*g;let A=b*L-_*j+v*E+w*T-M*C+x*S;return A?(A=1/A,e[0]=(a*L-l*j+u*E)*A,e[1]=(n*j-i*L-s*E)*A,e[2]=(m*x-g*M+y*w)*A,e[3]=(d*M-h*x-p*w)*A,e[4]=(l*T-o*L-u*C)*A,e[5]=(r*L-n*T+s*C)*A,e[6]=(g*v-f*x-y*_)*A,e[7]=(c*x-d*v+p*_)*A,e[8]=(o*j-a*T+u*S)*A,e[9]=(i*T-r*j-s*S)*A,e[10]=(f*M-m*v+y*b)*A,e[11]=(h*v-c*M-p*b)*A,e[12]=(a*C-o*E-l*S)*A,e[13]=(r*E-i*C+n*S)*A,e[14]=(m*_-f*w-g*b)*A,e[15]=(c*w-h*_+d*b)*A,e):null}function c(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],b=t[15];let _=r[0],v=r[1],w=r[2],M=r[3];return e[0]=_*i+v*a+w*h+M*m,e[1]=_*n+v*l+w*d+M*g,e[2]=_*s+v*u+w*p+M*y,e[3]=_*o+v*c+w*f+M*b,_=r[4],v=r[5],w=r[6],M=r[7],e[4]=_*i+v*a+w*h+M*m,e[5]=_*n+v*l+w*d+M*g,e[6]=_*s+v*u+w*p+M*y,e[7]=_*o+v*c+w*f+M*b,_=r[8],v=r[9],w=r[10],M=r[11],e[8]=_*i+v*a+w*h+M*m,e[9]=_*n+v*l+w*d+M*g,e[10]=_*s+v*u+w*p+M*y,e[11]=_*o+v*c+w*f+M*b,_=r[12],v=r[13],w=r[14],M=r[15],e[12]=_*i+v*a+w*h+M*m,e[13]=_*n+v*l+w*d+M*g,e[14]=_*s+v*u+w*p+M*y,e[15]=_*o+v*c+w*f+M*b,e}function h(e,t,r){const i=r[0],n=r[1],s=r[2];let o,a,l,u,c,h,d,p,f,m,g,y;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15]):(o=t[0],a=t[1],l=t[2],u=t[3],c=t[4],h=t[5],d=t[6],p=t[7],f=t[8],m=t[9],g=t[10],y=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=h,e[6]=d,e[7]=p,e[8]=f,e[9]=m,e[10]=g,e[11]=y,e[12]=o*i+c*n+f*s+t[12],e[13]=a*i+h*n+m*s+t[13],e[14]=l*i+d*n+g*s+t[14],e[15]=u*i+p*n+y*s+t[15]),e}function d(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,r,i){let s,o,a,l,u,c,h,d,p,f,m,g,y,b,_,v,w,M,x,S,C,T,E,j,L=i[0],A=i[1],q=i[2],I=Math.sqrt(L*L+A*A+q*q);return I<n.E?null:(I=1/I,L*=I,A*=I,q*=I,s=Math.sin(r),o=Math.cos(r),a=1-o,l=t[0],u=t[1],c=t[2],h=t[3],d=t[4],p=t[5],f=t[6],m=t[7],g=t[8],y=t[9],b=t[10],_=t[11],v=L*L*a+o,w=A*L*a+q*s,M=q*L*a-A*s,x=L*A*a-q*s,S=A*A*a+o,C=q*A*a+L*s,T=L*q*a+A*s,E=A*q*a-L*s,j=q*q*a+o,e[0]=l*v+d*w+g*M,e[1]=u*v+p*w+y*M,e[2]=c*v+f*w+b*M,e[3]=h*v+m*w+_*M,e[4]=l*x+d*S+g*C,e[5]=u*x+p*S+y*C,e[6]=c*x+f*S+b*C,e[7]=h*x+m*S+_*C,e[8]=l*T+d*E+g*j,e[9]=u*T+p*E+y*j,e[10]=c*T+f*E+b*j,e[11]=h*T+m*E+_*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function f(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function m(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,l=n+n,u=s+s,c=i*a,h=i*l,d=i*u,p=n*l,f=n*u,m=s*u,g=o*a,y=o*l,b=o*u;return e[0]=1-(p+m),e[1]=h+b,e[2]=d-y,e[3]=0,e[4]=h-b,e[5]=1-(c+m),e[6]=f+g,e[7]=0,e[8]=d+y,e[9]=f-g,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}const g=(0,i.c)();function y(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function _(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],b=e[15],_=t[0],v=t[1],w=t[2],M=t[3],x=t[4],S=t[5],C=t[6],T=t[7],E=t[8],j=t[9],L=t[10],A=t[11],q=t[12],I=t[13],R=t[14],V=t[15];return Math.abs(r-_)<=n.E*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-v)<=n.E*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-w)<=n.E*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-M)<=n.E*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=n.E*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-S)<=n.E*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-C)<=n.E*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-T)<=n.E*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-E)<=n.E*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(d-j)<=n.E*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(p-L)<=n.E*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(f-A)<=n.E*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(m-q)<=n.E*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(g-I)<=n.E*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-R)<=n.E*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(b-V)<=n.E*Math.max(1,Math.abs(b),Math.abs(V))}function v(e){const t=n.E,r=e[0],i=e[1],s=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(i*i+a*a+c*c))<=t&&Math.abs(1-(s*s+l*l+h*h))<=t}const w=c,M=y;Object.freeze({__proto__:null,copy:s,set:o,identity:a,transpose:l,invert:u,adjoint:function(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15];return e[0]=a*(d*y-p*g)-h*(l*y-u*g)+m*(l*p-u*d),e[1]=-(i*(d*y-p*g)-h*(n*y-s*g)+m*(n*p-s*d)),e[2]=i*(l*y-u*g)-a*(n*y-s*g)+m*(n*u-s*l),e[3]=-(i*(l*p-u*d)-a*(n*p-s*d)+h*(n*u-s*l)),e[4]=-(o*(d*y-p*g)-c*(l*y-u*g)+f*(l*p-u*d)),e[5]=r*(d*y-p*g)-c*(n*y-s*g)+f*(n*p-s*d),e[6]=-(r*(l*y-u*g)-o*(n*y-s*g)+f*(n*u-s*l)),e[7]=r*(l*p-u*d)-o*(n*p-s*d)+c*(n*u-s*l),e[8]=o*(h*y-p*m)-c*(a*y-u*m)+f*(a*p-u*h),e[9]=-(r*(h*y-p*m)-c*(i*y-s*m)+f*(i*p-s*h)),e[10]=r*(a*y-u*m)-o*(i*y-s*m)+f*(i*u-s*a),e[11]=-(r*(a*p-u*h)-o*(i*p-s*h)+c*(i*u-s*a)),e[12]=-(o*(h*g-d*m)-c*(a*g-l*m)+f*(a*d-l*h)),e[13]=r*(h*g-d*m)-c*(i*g-n*m)+f*(i*d-n*h),e[14]=-(r*(a*g-l*m)-o*(i*g-n*m)+f*(i*l-n*a)),e[15]=r*(a*d-l*h)-o*(i*d-n*h)+c*(i*l-n*a),e},determinant:function(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15];return(t*o-r*s)*(h*g-d*m)-(t*a-i*s)*(c*g-d*f)+(t*l-n*s)*(c*m-h*f)+(r*a-i*o)*(u*g-d*p)-(r*l-n*o)*(u*m-h*p)+(i*l-n*a)*(u*f-c*p)},multiply:c,translate:h,scale:d,rotate:p,rotateX:function(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+u*i,e[5]=o*n+c*i,e[6]=a*n+h*i,e[7]=l*n+d*i,e[8]=u*n-s*i,e[9]=c*n-o*i,e[10]=h*n-a*i,e[11]=d*n-l*i,e},rotateY:function(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-u*i,e[1]=o*n-c*i,e[2]=a*n-h*i,e[3]=l*n-d*i,e[8]=s*i+u*n,e[9]=o*i+c*n,e[10]=a*i+h*n,e[11]=l*i+d*n,e},rotateZ:function(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+u*i,e[1]=o*n+c*i,e[2]=a*n+h*i,e[3]=l*n+d*i,e[4]=u*n-s*i,e[5]=c*n-o*i,e[6]=h*n-a*i,e[7]=d*n-l*i,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:function(e,t,r){let i,s,o,a=r[0],l=r[1],u=r[2],c=Math.sqrt(a*a+l*l+u*u);return c<n.E?null:(c=1/c,a*=c,l*=c,u*=c,i=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=a*a*o+s,e[1]=l*a*o+u*i,e[2]=u*a*o-l*i,e[3]=0,e[4]=a*l*o-u*i,e[5]=l*l*o+s,e[6]=u*l*o+a*i,e[7]=0,e[8]=a*u*o+l*i,e[9]=l*u*o-a*i,e[10]=u*u*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:f,fromYRotation:function(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:m,fromQuat2:function(e,t){const r=g,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=i*i+n*n+s*s+o*o;return h>0?(r[0]=2*(a*o+c*i+l*s-u*n)/h,r[1]=2*(l*o+c*n+u*i-a*s)/h,r[2]=2*(u*o+c*s+a*n-l*i)/h):(r[0]=2*(a*o+c*i+l*s-u*n),r[1]=2*(l*o+c*n+u*i-a*s),r[2]=2*(u*o+c*s+a*n-l*i)),m(e,t,r),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+c*c),e},getRotation:function(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},fromRotationTranslationScale:function(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,u=s+s,c=o+o,h=n*l,d=n*u,p=n*c,f=s*u,m=s*c,g=o*c,y=a*l,b=a*u,_=a*c,v=i[0],w=i[1],M=i[2];return e[0]=(1-(f+g))*v,e[1]=(d+_)*v,e[2]=(p-b)*v,e[3]=0,e[4]=(d-_)*w,e[5]=(1-(h+g))*w,e[6]=(m+y)*w,e[7]=0,e[8]=(p+b)*M,e[9]=(m-y)*M,e[10]=(1-(h+f))*M,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],l=t[3],u=s+s,c=o+o,h=a+a,d=s*u,p=s*c,f=s*h,m=o*c,g=o*h,y=a*h,b=l*u,_=l*c,v=l*h,w=i[0],M=i[1],x=i[2],S=n[0],C=n[1],T=n[2],E=(1-(m+y))*w,j=(p+v)*w,L=(f-_)*w,A=(p-v)*M,q=(1-(d+y))*M,I=(g+b)*M,R=(f+_)*x,V=(g-b)*x,O=(1-(d+m))*x;return e[0]=E,e[1]=j,e[2]=L,e[3]=0,e[4]=A,e[5]=q,e[6]=I,e[7]=0,e[8]=R,e[9]=V,e[10]=O,e[11]=0,e[12]=r[0]+S-(E*S+A*C+R*T),e[13]=r[1]+C-(j*S+q*C+V*T),e[14]=r[2]+T-(L*S+I*C+O*T),e[15]=1,e},fromQuat:function(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,u=r*o,c=i*o,h=i*a,d=n*o,p=n*a,f=n*l,m=s*o,g=s*a,y=s*l;return e[0]=1-h-f,e[1]=c+y,e[2]=d-g,e[3]=0,e[4]=c-y,e[5]=1-u-f,e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,t,r,i,n,s,o){const a=1/(r-t),l=1/(n-i),u=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*l,e[10]=(o+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*u,e[15]=0,e},perspective:function(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e},perspectiveFromFieldOfView:function(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},ortho:function(e,t,r,i,n,s,o){const a=1/(t-r),l=1/(i-n),u=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*l,e[14]=(o+s)*u,e[15]=1,e},lookAt:function(e,t,r,i){let s,o,l,u,c,h,d,p,f,m;const g=t[0],y=t[1],b=t[2],_=i[0],v=i[1],w=i[2],M=r[0],x=r[1],S=r[2];return Math.abs(g-M)<n.E&&Math.abs(y-x)<n.E&&Math.abs(b-S)<n.E?a(e):(d=g-M,p=y-x,f=b-S,m=1/Math.sqrt(d*d+p*p+f*f),d*=m,p*=m,f*=m,s=v*f-w*p,o=w*d-_*f,l=_*p-v*d,m=Math.sqrt(s*s+o*o+l*l),m?(m=1/m,s*=m,o*=m,l*=m):(s=0,o=0,l=0),u=p*l-f*o,c=f*s-d*l,h=d*o-p*s,m=Math.sqrt(u*u+c*c+h*h),m?(m=1/m,u*=m,c*=m,h*=m):(u=0,c=0,h=0),e[0]=s,e[1]=u,e[2]=d,e[3]=0,e[4]=o,e[5]=c,e[6]=p,e[7]=0,e[8]=l,e[9]=h,e[10]=f,e[11]=0,e[12]=-(s*g+o*y+l*b),e[13]=-(u*g+c*y+h*b),e[14]=-(d*g+p*y+f*b),e[15]=1,e)},targetTo:function(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],l=i[1],u=i[2];let c=n-r[0],h=s-r[1],d=o-r[2],p=c*c+h*h+d*d;p>0&&(p=1/Math.sqrt(p),c*=p,h*=p,d*=p);let f=l*d-u*h,m=u*c-a*d,g=a*h-l*c;return p=f*f+m*m+g*g,p>0&&(p=1/Math.sqrt(p),f*=p,m*=p,g*=p),e[0]=f,e[1]=m,e[2]=g,e[3]=0,e[4]=h*g-d*m,e[5]=d*f-c*g,e[6]=c*m-h*f,e[7]=0,e[8]=c,e[9]=h,e[10]=d,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:y,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},exactEquals:b,equals:_,isOrthoNormal:v,mul:w,sub:M})},13598:(e,t,r)=>{function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function s(e,t){return new Float64Array(e,t,16)}r.d(t,{I:()=>o,a:()=>s,b:()=>n,c:()=>i});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:i,clone:n,fromValues:function(e,t,r,i,n,s,o,a,l,u,c,h,d,p,f,m){return[e,t,r,i,n,s,o,a,l,u,c,h,d,p,f,m]},createView:s,IDENTITY:o})},94961:(e,t,r)=>{function i(){return[0,0,0,1]}function n(e){return[e[0],e[1],e[2],e[3]]}function s(e,t){return new Float64Array(e,t,4)}r.d(t,{I:()=>o,a:()=>i,b:()=>n,c:()=>s});const o=[0,0,0,1];Object.freeze({__proto__:null,create:i,clone:n,fromValues:function(e,t,r,i){return[e,t,r,i]},createView:s,IDENTITY:o})},8310:(e,t,r)=>{r.d(t,{a:()=>y,c:()=>m}),r(80442);var i=r(92604),n=r(22021),s=r(70586),o=r(52138),a=r(17896),l=r(65617),u=r(98766),c=r(88669),h=r(78341),d=r(61277),p=r(12981);const f=i.Z.getLogger("esri.geometry.support.sphere");function m(){return(0,c.c)()}function g(e,t=m()){return(0,u.c)(t,e)}function y(e){e[0]=e[1]=e[2]=e[3]=0}function b(e){return Array.isArray(e)?e[3]:e}function _(e){return Array.isArray(e)?e:j}function v(e,t,r){if((0,s.Wi)(t))return!1;const{origin:i,direction:n}=t,o=w;o[0]=i[0]-e[0],o[1]=i[1]-e[1],o[2]=i[2]-e[2];const a=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],l=2*(n[0]*o[0]+n[1]*o[1]+n[2]*o[2]),u=l*l-4*a*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(u<0)return!1;const c=Math.sqrt(u);let h=(-l-c)/(2*a);const d=(-l+c)/(2*a);return(h<0||d<h&&d>0)&&(h=d),!(h<0||(r&&(r[0]=i[0]+n[0]*h,r[1]=i[1]+n[1]*h,r[2]=i[2]+n[2]*h),0))}const w=(0,l.c)();function M(e,t,r){const i=p.WM.get(),n=p.MP.get();(0,a.c)(i,t.origin,t.direction);const s=b(e);(0,a.c)(r,i,t.origin),(0,a.a)(r,r,1/(0,a.l)(r)*s);const l=S(e,t.origin),u=(0,d.EU)(t.origin,r);return(0,o.i)(n),(0,o.d)(n,n,u+l,i),(0,a.m)(r,r,n),r}function x(e,t,r){const i=(0,a.f)(p.WM.get(),t,_(e)),n=(0,a.a)(p.WM.get(),i,e[3]/(0,a.l)(i));return(0,a.b)(r,n,_(e))}function S(e,t){const r=(0,a.f)(p.WM.get(),t,_(e)),i=(0,a.l)(r),s=b(e),o=s+Math.abs(s-i);return(0,n.ZF)(s/o)}const C=(0,l.c)();function T(e,t,r,i){const s=(0,a.f)(C,t,_(e));switch(r){case 0:{const e=(0,n.jE)(s,C)[2];return(0,a.s)(i,-Math.sin(e),Math.cos(e),0)}case 1:{const e=(0,n.jE)(s,C),t=e[1],r=e[2],o=Math.sin(t);return(0,a.s)(i,-o*Math.cos(r),-o*Math.sin(r),Math.cos(t))}case 2:return(0,a.n)(i,s);default:return}}function E(e,t){const r=(0,a.f)(L,t,_(e));return(0,a.l)(r)-e[3]}const j=(0,l.c)(),L=(0,l.c)();Object.freeze({__proto__:null,create:m,copy:g,fromCenterAndRadius:function(e,t){return(0,c.f)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:y,fromRadius:function(e){return e},getRadius:b,getCenter:_,fromValues:function(e,t,r,i){return(0,c.f)(e,t,r,i)},elevate:function(e,t,r){return e!==r&&(0,a.g)(r,e),r[3]=e[3]+t,r},setExtent:function(e,t,r){return f.error("sphere.setExtent is not yet supported"),e===r?r:g(e,r)},intersectRay:v,intersectsRay:function(e,t){return v(e,t,null)},intersectRayClosestSilhouette:function(e,t,r){if(v(e,t,r))return r;const i=M(e,t,p.WM.get());return(0,a.b)(r,t.origin,(0,a.a)(p.WM.get(),t.direction,(0,a.i)(t.origin,i)/(0,a.l)(t.direction))),r},closestPointOnSilhouette:M,closestPoint:function(e,t,r){return v(e,t,r)?r:((0,h.JI)(t,_(e),r),x(e,r,r))},projectPoint:x,distanceToSilhouette:function(e,t){const r=(0,a.f)(p.WM.get(),t,_(e)),i=(0,a.p)(r),n=e[3]*e[3];return Math.sqrt(Math.abs(i-n))},angleToSilhouette:S,axisAt:T,altitudeAt:E,setAltitudeAt:function(e,t,r,i){const n=E(e,t),s=T(e,t,2,L),o=(0,a.a)(L,s,r-n);return(0,a.b)(i,t,o)}})},4307:(e,t,r)=>{r.d(t,{d:()=>l,s:()=>n,t:()=>d});var i=r(46851);function n(e,t,r){return e[0]=t,e[1]=r,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function o(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function a(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function l(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function u(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function c(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function h(e){const t=e[0],r=e[1];return t*t+r*r}function d(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}const p=c,f=s,m=o,g=a,y=l,b=u,_=h;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:n,add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},subtract:s,multiply:o,divide:a,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e},distance:l,squaredDistance:u,length:c,squaredLength:h,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:function(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},cross:function(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e},lerp:function(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e},random:function(e,t){t=t||1;const r=2*(0,i.R)()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},transformMat2:function(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e},transformMat2d:d,transformMat3:function(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e},transformMat4:function(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e},rotate:function(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e},angle:function(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*n+i*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]},equals:function(e,t){const r=e[0],n=e[1],s=t[0],o=t[1];return Math.abs(r-s)<=i.E*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=i.E*Math.max(1,Math.abs(n),Math.abs(o))},projectAndScale:function(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e},len:p,sub:f,mul:m,div:g,dist:y,sqrDist:b,sqrLen:_})},97323:(e,t,r)=>{function i(e,t){return[e,t]}function n(e,t){return new Float64Array(e,t,2)}function s(){return i(1,1)}function o(){return i(1,0)}function a(){return i(0,1)}r.d(t,{c:()=>n});const l=s(),u=o(),c=a();Object.freeze({__proto__:null,create:function(){return[0,0]},clone:function(e){return[e[0],e[1]]},fromValues:i,fromArray:function(e){const t=[0,0],r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t},createView:n,zeros:function(){return[0,0]},ones:s,unitX:o,unitY:a,ZEROS:[0,0],ONES:l,UNIT_X:u,UNIT_Y:c})},17896:(e,t,r)=>{r.d(t,{E:()=>h,a:()=>d,b:()=>l,c:()=>b,d:()=>y,e:()=>_,f:()=>u,g:()=>o,h:()=>f,i:()=>p,k:()=>C,l:()=>s,m:()=>v,n:()=>g,p:()=>m,q:()=>M,r:()=>T,s:()=>a,t:()=>w,u:()=>I,w:()=>E});var i=r(65617),n=r(46851);function s(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function u(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function c(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function h(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function d(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function p(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function f(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function m(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function g(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function y(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function b(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=n*l-s*a,e[1]=s*o-i*l,e[2]=i*a-n*o,e}function _(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function v(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function w(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function M(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],l=t[1],u=t[2];let c=n*u-s*l,h=s*a-i*u,d=i*l-n*a,p=n*d-s*h,f=s*c-i*d,m=i*h-n*c;const g=2*o;return c*=g,h*=g,d*=g,p*=2,f*=2,m*=2,e[0]=a+c+p,e[1]=l+h+f,e[2]=u+d+m,e}const x=(0,i.c)(),S=(0,i.c)();function C(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function T(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const E=u,j=c,L=h,A=p,q=f,I=s,R=m;Object.freeze({__proto__:null,length:s,copy:o,set:a,add:l,subtract:u,multiply:c,divide:h,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:d,scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e},distance:p,squaredDistance:f,squaredLength:m,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:g,dot:y,cross:b,lerp:_,hermite:function(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),c=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+i[0]*u+n[0]*c,e[1]=t[1]*a+r[1]*l+i[1]*u+n[1]*c,e[2]=t[2]*a+r[2]*l+i[2]*u+n[2]*c,e},bezier:function(e,t,r,i,n,s){const o=1-s,a=o*o,l=s*s,u=a*o,c=3*s*a,h=3*l*o,d=l*s;return e[0]=t[0]*u+r[0]*c+i[0]*h+n[0]*d,e[1]=t[1]*u+r[1]*c+i[1]*h+n[1]*d,e[2]=t[2]*u+r[2]*c+i[2]*h+n[2]*d,e},random:function(e,t){t=t||1;const r=2*(0,n.R)()*Math.PI,i=2*(0,n.R)()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=i*t,e},transformMat4:v,transformMat3:w,transformQuat:M,rotateX:function(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e},rotateY:function(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e},rotateZ:function(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e},angle:function(e,t){o(x,e),o(S,t),g(x,x),g(S,S);const r=y(x,S);return r>1?0:r<-1?Math.PI:Math.acos(r)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:C,equals:function(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return Math.abs(r-o)<=n.E*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=n.E*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-l)<=n.E*Math.max(1,Math.abs(s),Math.abs(l))},direction:T,sub:E,mul:j,div:L,dist:A,sqrDist:q,len:I,sqrLen:R})},65617:(e,t,r)=>{function i(){return[0,0,0]}function n(e){return[e[0],e[1],e[2]]}function s(e,t,r){return[e,t,r]}function o(e){const t=[0,0,0],r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function a(e,t){return new Float64Array(e,t,3)}function l(){return s(1,1,1)}function u(){return s(1,0,0)}function c(){return s(0,1,0)}function h(){return s(0,0,1)}r.d(t,{O:()=>p,Z:()=>d,a:()=>n,b:()=>a,c:()=>i,d:()=>o,f:()=>s});const d=[0,0,0],p=l(),f=u(),m=c(),g=h();Object.freeze({__proto__:null,create:i,clone:n,fromValues:s,fromArray:o,createView:a,zeros:function(){return[0,0,0]},ones:l,unitX:u,unitY:c,unitZ:h,ZEROS:d,ONES:p,UNIT_X:f,UNIT_Y:m,UNIT_Z:g})},98766:(e,t,r)=>{r.d(t,{a:()=>o,b:()=>c,c:()=>n,d:()=>g,e:()=>p,f:()=>f,g:()=>_,h:()=>v,l:()=>y,n:()=>m,s:()=>s,t:()=>b});var i=r(46851);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function o(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function u(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function h(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function d(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function p(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function f(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function m(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function g(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function y(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function b(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function _(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function v(e,t){const r=e[0],n=e[1],s=e[2],o=e[3],a=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(r-a)<=i.E*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=i.E*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-u)<=i.E*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-c)<=i.E*Math.max(1,Math.abs(o),Math.abs(c))}const w=a,M=l,x=u,S=h,C=d,T=p,E=f;Object.freeze({__proto__:null,copy:n,set:s,add:o,subtract:a,multiply:l,divide:u,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:c,scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},distance:h,squaredDistance:d,length:p,squaredLength:f,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:m,dot:g,lerp:y,random:function(e,t){let r,n,s,o,a,l;t=t||1;do{r=2*(0,i.R)()-1,n=2*(0,i.R)()-1,a=r*r+n*n}while(a>=1);do{s=2*(0,i.R)()-1,o=2*(0,i.R)()-1,l=s*s+o*o}while(l>=1);const u=Math.sqrt((1-a)/l);return e[0]=t*r,e[1]=t*n,e[2]=t*s*u,e[3]=t*o*u,e},transformMat4:b,transformQuat:function(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],u=r[3],c=u*i+a*s-l*n,h=u*n+l*i-o*s,d=u*s+o*n-a*i,p=-o*i-a*n-l*s;return e[0]=c*u+p*-o+h*-l-d*-a,e[1]=h*u+p*-a+d*-o-c*-l,e[2]=d*u+p*-l+c*-a-h*-o,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:_,equals:v,sub:w,mul:M,div:x,dist:S,sqrDist:C,len:T,sqrLen:E})},88669:(e,t,r)=>{function i(){return[0,0,0,0]}function n(e,t,r,i){return[e,t,r,i]}function s(e,t){return new Float64Array(e,t,4)}function o(){return n(1,1,1,1)}function a(){return n(1,0,0,0)}function l(){return n(0,1,0,0)}function u(){return n(0,0,1,0)}function c(){return n(0,0,0,1)}r.d(t,{a:()=>s,c:()=>i,f:()=>n});const h=o(),d=a(),p=l(),f=u(),m=c();Object.freeze({__proto__:null,create:i,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:n,fromArray:function(e){const t=[0,0,0,0],r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t},createView:s,zeros:function(){return[0,0,0,0]},ones:o,unitX:a,unitY:l,unitZ:u,unitW:c,ZEROS:[0,0,0,0],ONES:h,UNIT_X:d,UNIT_Y:p,UNIT_Z:f,UNIT_W:m})},35270:(e,t,r)=>{r.d(t,{h$:()=>n,VL:()=>s,rW:()=>l,B7:()=>a});const i={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function n(e){var t;return null!=(t=i[e.toLowerCase()])?t:null}function s(e){const t=n(e);return t?[...t]:t}function o(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function a(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,a=2*r-s;return[Math.round(255*o(a,s,n+1/3)),Math.round(255*o(a,s,n)),Math.round(255*o(a,s,n-1/3)),i]}function l(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?9===e.length:5===e.length;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&i,o>>=r,a[3]=n*l/255),l=o&i,o>>=r,a[2]=n*l,l=o&i,o>>=r,a[1]=n*l,l=o&i,o>>=r,a[0]=n*l,a}},81049:(e,t,r)=>{r.d(t,{Z:()=>A});var i,n=r(43697),s=r(3894),o=r(32448),a=r(22974),l=r(70586),u=r(71143),c=r(90584),h=r(5600),d=r(75215),p=r(52421),f=r(52011),m=r(58971),g=r(39020);class y{constructor(){this._observers=[]}observe(e){return this._observers.includes(e)||this._observers.push(e),new g.X(this._observers,e)}notify(){const e=this._observers.slice();for(let t=0;t<e.length;++t){const r=e[t];r.onInvalidated(),r.onCommitted()}}}const b=new u.Z(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),_=()=>{};function v(e){return e?e instanceof L?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function w(e){if(e&&e.length)return e[0]}function M(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function x(e,t,r,i){t&&t.forEach(((t,n,s)=>{e.push(t),x(e,r.call(i,t,n,s),r,i)}))}const S=new Set,C=new Set,T=new Set,E=new Map;let j=0,L=i=class extends o.Z.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new y,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:j++})}static isCollection(e){return null!=e&&e instanceof i}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof i?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,m.it)(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...v(e)),this._emitAfterChanges(1))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=_,r.removed=!0,e.splice(e.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if((0,m.it)(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(null!=t?t:null);return this._splice(r,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if((0,m.it)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t);return this._splice(r,0,...v(e)),this._emitAfterChanges(1),this}removeAll(){if((0,m.it)(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return(0,m.it)(this._observable),this._createNewInstance({items:this._items.map(a.d9)})}concat(...e){(0,m.it)(this._observable);const t=e.map(v);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,m.it)(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=(0,l.j0)(this._splice(0,this.length)),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(2)}every(e,t){return(0,m.it)(this._observable),this._items.every(e,t)}filter(e,t){let r;return(0,m.it)(this._observable),r=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return(0,m.it)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,m.it)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,m.it)(this._observable);const r=[];return x(r,this,e,t),new i(r)}forEach(e,t){return(0,m.it)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,m.it)(this._observable),this._items[e]}getNextIndex(e){(0,m.it)(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,m.it)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,m.it)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,m.it)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,m.it)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,m.it)(this._observable);const r=this._items.map(e,t);return new i({items:r})}reorder(e,t=this.length-1){(0,m.it)(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}pop(){if((0,m.it)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=w(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return(0,m.it)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){(0,m.it)(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){(0,m.it)(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return(0,m.it)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,m.it)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=w(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if((0,m.it)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof i?e.toArray():e,r=this._items,n=[],s=t.length;for(let e=0;e<s;e++){const i=t[e],s=r.indexOf(i);if(s>-1){const i=1+M(t,r,e+1,s+1),o=this._splice(s,i);o&&o.length>0&&n.push.apply(n,o),e+=i-1}}return this._emitAfterChanges(2),n}reverse(){if((0,m.it)(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if((0,m.it)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=w(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return(0,m.it)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,m.it)(this._observable),this._items.some(e,t)}sort(e){if((0,m.it)(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=(0,l.j0)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...r){(0,m.it)(this._observable);const i=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,...r)||[];return this._emitAfterChanges(i),n}toArray(){return(0,m.it)(this._observable),this._items.slice()}toJSON(){return(0,m.it)(this._observable),this.toArray()}toLocaleString(){return(0,m.it)(this._observable),this._items.toLocaleString()}toString(){return(0,m.it)(this._observable),this._items.toString()}unshift(...e){return(0,m.it)(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,c.Os)((()=>this._dispatchChange()))),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const t=b.acquire();t.target=this,t.cancellable=!0;for(let r=0,n=o.length;r<n;r++)s=o[r],t.reset(s),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(r,1),i.splice(e,0,s),e+=1,r-=1,n-=1);b.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=b.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let r=0;r<t;r++)e.reset(o[r]),this.emit("after-remove",e);b.release(e)}}if(r&&r.length){if(n){const e=[];for(const t of r){const r=n.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),s=this.hasEventListener("after-add"),o=e===this.length;if(t||s){const n=b.acquire();n.target=this,n.cancellable=!0;const a=b.acquire();a.target=this,a.cancellable=!1;for(const l of r)t?(n.reset(l),this.emit("before-add",n),n.defaultPrevented||(o?i.push(l):i.splice(e++,0,l),this._set("length",i.length),s&&(a.reset(l),this.emit("after-add",a)))):(o?i.push(l):i.splice(e++,0,l),this._set("length",i.length),a.reset(l),this.emit("after-add",a));b.release(a),b.release(n)}else{if(o)for(const e of r)i.push(e);else i.splice(e,0,...r);this._set("length",i.length)}}return(r&&r.length||o&&o.length)&&this._notifyChangeEvent(r,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=b.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,b.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=b.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),b.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;S.clear(),C.clear(),T.clear();for(const{added:t,removed:r}of e){if(t)if(0===T.size&&0===C.size)for(const e of t)S.add(e);else for(const e of t)C.has(e)?(T.add(e),C.delete(e)):T.has(e)||S.add(e);if(r)if(0===T.size&&0===S.size)for(const e of r)C.add(e);else for(const e of r)S.has(e)?S.delete(e):(T.delete(e),C.add(e))}const r=s.Z.acquire();S.forEach((e=>{r.push(e)}));const i=s.Z.acquire();C.forEach((e=>{i.push(e)}));const n=this._items,o=t.items,a=s.Z.acquire();if(T.forEach((e=>{o.indexOf(e)!==n.indexOf(e)&&a.push(e)})),t.listeners&&(r.length||i.length||a.length)){const e={target:this,added:r,removed:i,moved:a},n=t.listeners.length;for(let r=0;r<n;r++){const i=t.listeners[r];i.removed||i.callback.call(this,e)}}s.Z.release(r),s.Z.release(i),s.Z.release(a)}S.clear(),C.clear(),T.clear()}};L.ofType=e=>{if(!e)return i;if(E.has(e))return E.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const i=e.typeMap[r].prototype.declaredClass;t?t+=` | ${i}`:t=i}let r=class extends i{};return(0,n._)([(0,p.c)({Type:e,ensureType:"function"==typeof e?(0,d.se)(e):(0,d.N7)(e)})],r.prototype,"itemType",void 0),r=(0,n._)([(0,f.j)(`esri.core.Collection<${t}>`)],r),E.set(e,r),r},(0,n._)([(0,h.Cb)()],L.prototype,"length",void 0),(0,n._)([(0,h.Cb)()],L.prototype,"items",null),L=i=(0,n._)([(0,f.j)("esri.core.Collection")],L);const A=L},32448:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(43697),n=r(15923),s=r(50758),o=r(52011);class a{constructor(){this._emitter=new a.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(e){class t{constructor(e=null){this.target=e,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(e,t){const r=this._listenersMap&&this._listenersMap.get(e);if(!r)return!1;const i=this.target||this;return[...r].forEach((e=>{e.call(i,t)})),r.length>0}on(e,t){if(Array.isArray(e)){const r=e.map((e=>this.on(e,t)));return(0,s.AL)(r)}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(e)||[];return r.push(t),this._listenersMap.set(e,r),{remove:()=>{const r=this._listenersMap&&this._listenersMap.get(e)||[],i=r.indexOf(t);i>=0&&r.splice(i,1)}}}once(e,t){const r=this.on(e,(e=>{r.remove(),t.call(null,e)}));return r}hasEventListener(e){const t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{let r=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return r=(0,i._)([(0,o.j)("esri.core.Evented")],r),r};let r=class extends n.Z{constructor(){super(...arguments),this._emitter=new a.EventEmitter(this)}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};r=(0,i._)([(0,o.j)("esri.core.Evented")],r),e.EventedAccessor=r}(a||(a={}));const l=a},61247:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(43697),n=r(15923),s=r(81049),o=r(70586),a=r(5600),l=r(52011);let u=class extends n.Z{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!s.Z.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||s.Z.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||s.Z.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let e=0;e<t.length;e++)t[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return(0,o.j0)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};(0,i._)([(0,a.Cb)({readOnly:!0})],u.prototype,"size",null),u=(0,i._)([(0,l.j)("esri.core.Handles")],u);const c=u},16453:(e,t,r)=>{r.d(t,{R:()=>b,w:()=>_});var i=r(43697),n=r(15923),s=r(70586),o=r(22974),a=r(31263);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.kk),this._values=new Map}clone(e){const t=new l,r=this._originStores[0];r&&r.forEach(((e,r)=>{t.set(r,(0,o.d9)(e),0)}));for(let r=2;r<a.kk;r++){const i=this._originStores[r];i&&i.forEach(((i,n)=>{e&&e.has(n)||t.set(n,(0,o.d9)(i),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||(0,s.j0)(this._propertyOriginMap.get(e))<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=6){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r&&r.get(e),n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),n!==i}originOf(e){return this._propertyOriginMap.get(e)||0}forEach(e){this._values.forEach(e)}}var u=r(50549),c=r(1153),h=r(52011);const d=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,s.j0)((0,c.vw)(this)),r=t.metadatas,i=t.store,n=new l;t.store=n,i.keys().forEach((e=>{n.set(e,i.get(e),0)})),Object.keys(r).forEach((e=>{t.internalGet(e)&&n.set(e,t.internalGet(e),0)}))}read(e,t){(0,u.ij)(this,e,t)}getAtOrigin(e,t){const r=p(this),i=(0,a.M9)(t);if("string"==typeof e)return r.get(e,i);const n={};return e.forEach((e=>{n[e]=r.get(e,i)})),n}originOf(e){return(0,a.x3)(this.originIdOf(e))}originIdOf(e){return p(this).originOf(e)}revert(e,t){const r=p(this),i=(0,a.M9)(t),n=(0,c.vw)(this);let s;s="string"==typeof e?"*"===e?r.keys(i):[e]:e,s.forEach((e=>{n.invalidate(e),r.revert(e,i),n.commit(e)}))}};return t=(0,i._)([(0,h.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function p(e){return(0,c.vw)(e).store}let f=class extends(d(n.Z)){};f=(0,i._)([(0,h.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var m=r(76169);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return y(this).delete(e,(0,a.M9)(t))}write(e={},t){return(0,m.cW)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,c.vw)(this).setAtOrigin(e,t,(0,a.M9)(r))}removeOrigin(e){const t=y(this),r=(0,a.M9)(e),i=t.keys(r);for(const e of i)t.originOf(e)===r&&t.set(e,t.get(e,r),6)}updateOrigin(e,t){const r=y(this),i=(0,a.M9)(t),n=this.get(e);for(let t=i+1;t<a.kk;++t)r.delete(e,t);r.set(e,n,i)}toJSON(e){return this.write({},e)}};return t=(0,i._)([(0,h.j)("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function y(e){return(0,c.vw)(e).store}const b=e=>{let t=class extends(g(d(e))){constructor(...e){super(...e)}};return t=(0,i._)([(0,h.j)("esri.core.MultiOriginJSONSupport")],t),t};let _=class extends(b(n.Z)){};_=(0,i._)([(0,h.j)("esri.core.MultiOriginJSONSupport")],_)},22807:(e,t,r)=>{r.d(t,{x:()=>s});var i=r(70586),n=r(41213);class s{constructor(e){this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=n.Z.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,i.Bd)(this.tickHandle)),this.items=(0,i.Bd)(this.items)}get(){return 0===this.itemsPtr&&(0,n.Z)((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}grow(){for(let e=0;e<Math.max(8,Math.min(this.items.length,o));e++)this.items.push(this.allocator())}}const o=1024},52421:(e,t,r)=>{function i(e){return(t,r)=>{t[r]=e}}r.d(t,{c:()=>i})},22021:(e,t,r)=>{r.d(t,{ZF:()=>d,Kt:()=>p,jE:()=>g,uZ:()=>o,oK:()=>f,Vl:()=>c,wt:()=>a,t7:()=>u,Sf:()=>s,fp:()=>l,BV:()=>h});var i=r(17896);r(98766);const n=new Float32Array(1);function s(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function o(e,t,r){return Math.min(Math.max(e,t),r)}function a(e){return 0==(e&e-1)}function l(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function u(e,t,r){return e+(t-e)*r}function c(e){return e*Math.PI/180}function h(e){return 180*e/Math.PI}function d(e){return Math.acos(o(e,-1,1))}function p(e){return Math.asin(o(e,-1,1))}function f(e){return m(Math.max(-y,Math.min(e,y)))}function m(e){return n[0]=e,n[0]}function g(e,t){const r=(0,i.l)(e),n=p(e[2]/r),s=Math.atan2(e[1]/r,e[0]/r);return(0,i.s)(t,r,n,s),t}const y=m(34028234663852886e22)},17445:(e,t,r)=>{r.d(t,{Ym:()=>s}),r(91460);var i=r(70586),n=r(26258);function s(e,t,r={}){return function(e,t,r={},s){let o=null;const a=r.once?(e,r)=>{s(e)&&((0,i.hw)(o),t(e,r))}:(e,r)=>{s(e)&&t(e,r)};if(o=(0,n.aQ)(e,a,r.sync,r.equals),r.initial){const t=e();a(t,t)}return o}(e,t,r,o)}function o(e){return!0}r(87538)},35463:(e,t,r)=>{r.d(t,{rJ:()=>a,Nm:()=>s,JE:()=>o}),r(80442);const i={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},n={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=n[r],{getter:s,setter:o,multiplier:a}=e;i[o](i[s]()+t*a)}return i}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function a(e,t,r){return 0===e?0:e*i[t]/i[r]}},79235:(e,t,r)=>{r.d(t,{Z:()=>_});var i,n=r(43697),s=r(67676),o=r(35454),a=r(10736),l=r(67900),u=r(20941),c=r(5600),h=(r(80442),r(75215),r(71715)),d=r(52011),p=r(30556);const f=(0,o.wY)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=f.jsonValues.slice();(0,s.e$)(m,"orthometric");const g=(0,o.wY)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let y=i=class extends a.wq{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return f.write(e,t,r)}readHeightModel(e,t,r){return f.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new u.Z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(b(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,l.$C)(e)||g.read(e)||(r&&r.messages&&r.messages.push(b(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,l.cM)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i;return t.read(e,{origin:"web-scene"}),t}};function b(e,t){return new u.Z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,n._)([(0,c.Cb)({type:f.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal"}}}})],y.prototype,"heightModel",void 0),(0,n._)([(0,p.c)("web-scene","heightModel")],y.prototype,"writeHeightModel",null),(0,n._)([(0,h.r)(["web-scene","service"],"heightModel")],y.prototype,"readHeightModel",null),(0,n._)([(0,c.Cb)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g.jsonValues,write:g.write}}}})],y.prototype,"heightUnit",void 0),(0,n._)([(0,h.r)("web-scene","heightUnit")],y.prototype,"readHeightUnit",null),(0,n._)([(0,h.r)("service","heightUnit")],y.prototype,"readHeightUnitService",null),(0,n._)([(0,c.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],y.prototype,"vertCRS",void 0),(0,n._)([(0,h.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],y.prototype,"readVertCRS",null),y=i=(0,n._)([(0,d.j)("esri.geometry.HeightModelInfo")],y);const _=y},16996:(e,t,r)=>{r.d(t,{Ue:()=>l,Jk:()=>u,ct:()=>c});var i=r(22021),n=r(22807),s=r(17896),o=r(65617),a=r(12981);function l(e){return e?{origin:(0,o.a)(e.origin),vector:(0,o.a)(e.vector)}:{origin:(0,o.c)(),vector:(0,o.c)()}}function u(e,t){const r=(0,s.f)(a.WM.get(),t,e.origin),n=(0,s.d)(e.vector,r),o=(0,s.d)(e.vector,e.vector),l=(0,i.uZ)(n/o,0,1),u=(0,s.f)(a.WM.get(),(0,s.a)(a.WM.get(),e.vector,l),r);return(0,s.d)(u,u)}function c(e,t,r,n,o){const{vector:l,origin:u}=e,c=(0,s.f)(a.WM.get(),t,u),h=(0,s.d)(l,c)/(0,s.p)(l);return(0,s.a)(o,l,(0,i.uZ)(h,r,n)),(0,s.b)(o,o,e.origin)}(0,o.c)(),(0,o.c)(),new n.x((()=>({origin:null,vector:null})))},78341:(e,t,r)=>{r.d(t,{JI:()=>c,JG:()=>l,Ue:()=>a,Jk:()=>u});var i=r(22807),n=r(17896),s=r(65617),o=r(12981);function a(e){return e?{origin:(0,s.a)(e.origin),direction:(0,s.a)(e.direction)}:{origin:(0,s.c)(),direction:(0,s.c)()}}function l(e,t=a()){return function(e,t,r=a()){return(0,n.g)(r.origin,e),(0,n.g)(r.direction,t),r}(e.origin,e.direction,t)}function u(e,t){const r=(0,n.c)(o.WM.get(),(0,n.n)(o.WM.get(),e.direction),(0,n.f)(o.WM.get(),t,e.origin));return(0,n.d)(r,r)}function c(e,t,r){const i=(0,n.d)(e.direction,(0,n.f)(r,t,e.origin));return(0,n.b)(r,e.origin,(0,n.a)(r,e.direction,i)),r}new i.x((function(){return{origin:null,direction:null}}))},61277:(e,t,r)=>{r.d(t,{EU:()=>a,SR:()=>o});var i=r(22021),n=r(17896),s=r(65617);function o(e,t){return(0,n.d)(e,t)/(0,n.l)(e)}function a(e,t){const r=(0,n.d)(e,t)/((0,n.l)(e)*(0,n.l)(t));return-(0,i.ZF)(r)}(0,s.c)(),(0,s.c)()},12981:(e,t,r)=>{r.d(t,{MP:()=>m,WM:()=>p,o6:()=>f});var i=r(70586),n=r(41213),s=r(46521),o=r(13598),a=r(94961),l=r(97323),u=r(65617),c=r(88669);class h{constructor(e,t,r){this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=n.Z.before((()=>this.reset()))}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,i.Bd)(this.tickHandle)),this.itemsPtr=0,this.items=(0,i.Bd)(this.items),this.buffers=(0,i.Bd)(this.buffers)}get(){0===this.itemsPtr&&(0,n.Z)((()=>{}));const e=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=e;){const e=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let t=0;t<this.itemsPerBuffer;++t)this.items.push(this.itemCreate(e,t*this.itemByteSize));this.buffers.push(e)}return this.items[this.itemsPtr++]}reset(){const e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}static createVec2f64(e=d){return new h(16,l.c,e)}static createVec3f64(e=d){return new h(24,u.b,e)}static createVec4f64(e=d){return new h(32,c.a,e)}static createMat3f64(e=d){return new h(72,s.a,e)}static createMat4f64(e=d){return new h(128,o.a,e)}static createQuatf64(e=d){return new h(32,a.c,e)}get test(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}const d=4096,p=(h.createVec2f64(),h.createVec3f64()),f=h.createVec4f64(),m=(h.createMat3f64(),h.createMat4f64());h.createQuatf64()},29600:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(43697),n=r(68773),s=(r(66577),r(3172)),o=r(20102),a=r(32448),l=r(10699),u=r(83379),c=r(92604),h=r(95330),d=r(17452),p=r(5600),f=(r(67676),r(80442),r(75215),r(52011)),m=r(6570),g=r(82971);let y=0;const b=c.Z.getLogger("esri.layers.Layer");let _=class extends(a.Z.EventedMixin((0,l.I)(u.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.Z(-180,-90,180,90,g.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+y++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=g.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await r.e(3529).then(r.bind(r,63529));try{return await i.fromUrl(t)}catch(e){throw b.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",e),e}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await r.e(8008).then(r.bind(r,28008));try{return await i.fromItem(t)}catch(e){const r=t&&t.portalItem,i=r&&r.id||"unset",s=r&&r.portal&&r.portal.url||n.Z.portalUrl;throw b.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+i+"')",e),e}}initialize(){this.when().catch((e=>{var t,r;(0,h.D_)(e)||c.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?(0,d.mN)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,s.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new o.Z("layer:no-attribution-data","Layer does not have attribution data")}};(0,i._)([(0,p.Cb)({type:String})],_.prototype,"attributionDataUrl",void 0),(0,i._)([(0,p.Cb)({type:m.Z})],_.prototype,"fullExtent",void 0),(0,i._)([(0,p.Cb)({readOnly:!0})],_.prototype,"hasAttributionData",null),(0,i._)([(0,p.Cb)({type:String})],_.prototype,"id",void 0),(0,i._)([(0,p.Cb)({type:Boolean,nonNullable:!0})],_.prototype,"legendEnabled",void 0),(0,i._)([(0,p.Cb)({type:["show","hide","hide-children"]})],_.prototype,"listMode",void 0),(0,i._)([(0,p.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],_.prototype,"opacity",void 0),(0,i._)([(0,p.Cb)()],_.prototype,"parent",void 0),(0,i._)([(0,p.Cb)({readOnly:!0})],_.prototype,"parsedUrl",null),(0,i._)([(0,p.Cb)({type:Boolean})],_.prototype,"popupEnabled",void 0),(0,i._)([(0,p.Cb)({type:Boolean})],_.prototype,"attributionVisible",void 0),(0,i._)([(0,p.Cb)({type:g.Z})],_.prototype,"spatialReference",void 0),(0,i._)([(0,p.Cb)({type:String})],_.prototype,"title",void 0),(0,i._)([(0,p.Cb)({type:String,readOnly:!0,json:{read:!1}})],_.prototype,"type",void 0),(0,i._)([(0,p.Cb)()],_.prototype,"url",void 0),(0,i._)([(0,p.Cb)({type:Boolean,nonNullable:!0})],_.prototype,"visible",void 0),_=(0,i._)([(0,f.j)("esri.layers.Layer")],_);const v=_},53489:(e,t,r)=>{r.r(t),r.d(t,{default:()=>It});var i=r(43697),n=r(81049),s=r(61247),o=r(92604),a=r(70586),l=r(16453),u=r(95330),c=r(17445),h=r(5600),d=(r(67676),r(80442),r(75215)),p=r(52011),f=r(17896),m=r(65617),g=r(29600),y=r(3172),b=r(22021),_=r(99880);function v(e){return(0,_.V)(`esri/libs/vxl/${e}`)}var w=r(52138),M=r(13598),x=r(98766),S=r(88669),C=r(22807),T=r(16996),E=r(8310),j=r(12981);function L(e=N){return[e[0],e[1],e[2],e[3]]}function A(e,t=L()){return q(e[0],e[1],e[2],e[3],t)}function q(e,t,r,i,n=L()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}(0,m.c)(),(0,m.c)();const I=(0,m.c)();function R(e,t,r,i){return(0,f.c)(I,t,e),function(e,t,r){const i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=Math.abs(i-1)>1e-5&&i>1e-12?1/Math.sqrt(i):1;return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}(r,I,i)}function V(e,t,r){return P(e,t.origin,t.vector,0,r)}function O(e,t,r){return P(e,t.origin,t.vector,1,r)}function k(e,t){return function(e,t){return(0,f.d)(e,t)+e[3]}(e,t)>=0}function P(e,t,r,i,n){const s=(0,f.d)(e,r);if(0===s)return!1;let o=-((0,f.d)(e,t)+e[3])/s;return 1&i&&(o=(0,b.uZ)(o,0,1)),!(!(4&i)&&o<0||!(8&i)&&o>1||((0,f.b)(n,t,(0,f.a)(n,r,o)),0))}(0,m.c)(),(0,m.c)();const N=[0,0,1,0];var Z=r(78341),W=r(61277);const D=o.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function F(e=oe){return{plane:L(e.plane),origin:(0,m.a)(e.origin),basis1:(0,m.a)(e.basis1),basis2:(0,m.a)(e.basis2)}}function B(e,t=F()){return z(e.origin,e.basis1,e.basis2,t)}function z(e,t,r,i=F()){return(0,f.g)(i.origin,e),(0,f.g)(i.basis1,t),(0,f.g)(i.basis2,r),U(i),function(e,t){Math.abs((0,f.d)(e.basis1,e.basis2)/((0,f.l)(e.basis1)*(0,f.l)(e.basis2)))>1e-6&&D.warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,f.d)(e.basis1,te(e)))>1e-6&&D.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,f.d)(te(e),e.origin)-e.plane[3])>1e-6&&D.warn(t,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function U(e){R(e.basis2,e.basis1,e.origin,e.plane)}function G(e,t,r){e!==r&&B(e,r);const i=(0,f.a)(j.WM.get(),te(e),t);return(0,f.b)(r.origin,r.origin,i),r.plane[3]-=t,r}function H(e,t=F()){const r=(e[2]-e[0])/2,i=(e[3]-e[1])/2;return(0,f.s)(t.origin,e[0]+r,e[1]+i,0),(0,f.s)(t.basis1,r,0,0),(0,f.s)(t.basis2,0,i,0),q(0,0,1,0,t.plane),t}function Y(e,t,r){return!!function(e,t,r){return!!(0,a.pC)(t)&&P(e,t.origin,t.direction,8,r)}(e.plane,t,r)&&re(e,r)}function $(e,t,r){const i=ae.get();se(e,t,i,ae.get());let n=Number.POSITIVE_INFINITY;for(const s of he){const o=ne(e,s,le.get()),a=j.WM.get();if(V(i,o,a)){const e=(0,f.r)(j.WM.get(),t.origin,a),i=Math.abs((0,b.ZF)((0,f.d)(t.direction,e)));i<n&&(n=i,(0,f.g)(r,a))}}return n===Number.POSITIVE_INFINITY?J(e,t,r):r}function J(e,t,r){if(Y(e,t,r))return r;const i=ae.get(),n=ae.get();se(e,t,i,n);let s=Number.POSITIVE_INFINITY;for(const o of he){const a=ne(e,o,le.get()),l=j.WM.get();if(O(i,a,l)){const e=(0,Z.Jk)(t,l);if(!k(n,l))continue;e<s&&(s=e,(0,f.g)(r,l))}}return Q(e,t.origin)<s&&X(e,t.origin,r),r}function X(e,t,r){const i=function(e,t,r){const i=(0,f.a)(j.WM.get(),e,-e[3]),n=function(e,t,r){const i=(0,f.a)(j.WM.get(),e,(0,f.d)(e,t));return(0,f.f)(r,t,i),r}(e,(0,f.f)(j.WM.get(),t,i),j.WM.get());return(0,f.b)(r,n,i),r}(e.plane,t,j.WM.get()),n=(0,T.ct)(ie(e,e.basis1),i,-1,1,j.WM.get()),s=(0,T.ct)(ie(e,e.basis2),i,-1,1,j.WM.get());return(0,f.f)(r,(0,f.b)(j.WM.get(),n,s),e.origin),r}function K(e,t,r){const{origin:i,basis1:n,basis2:s}=e,o=(0,f.f)(j.WM.get(),t,i),a=(0,W.SR)(n,o),l=(0,W.SR)(s,o),u=(0,W.SR)(te(e),o);return(0,f.s)(r,a,l,u)}function Q(e,t){const r=K(e,t,j.WM.get()),{basis1:i,basis2:n}=e,s=(0,f.l)(i),o=(0,f.l)(n),a=Math.max(Math.abs(r[0])-s,0),l=Math.max(Math.abs(r[1])-o,0),u=r[2];return a*a+l*l+u*u}function ee(e,t){const r=-e.plane[3];return(0,W.SR)(te(e),t)-r}function te(e){return e.plane}function re(e,t){const r=(0,f.f)(j.WM.get(),t,e.origin),i=(0,f.p)(e.basis1),n=(0,f.p)(e.basis2),s=(0,f.d)(e.basis1,r),o=(0,f.d)(e.basis2,r);return-s-i<0&&s-i<0&&-o-n<0&&o-n<0}function ie(e,t){const r=le.get();return(0,f.g)(r.origin,e.origin),(0,f.g)(r.vector,t),r}function ne(e,t,r){const{basis1:i,basis2:n,origin:s}=e,o=(0,f.a)(j.WM.get(),i,t.origin[0]),a=(0,f.a)(j.WM.get(),n,t.origin[1]);(0,f.b)(r.origin,o,a),(0,f.b)(r.origin,r.origin,s);const l=(0,f.a)(j.WM.get(),i,t.direction[0]),u=(0,f.a)(j.WM.get(),n,t.direction[1]);return(0,f.a)(r.vector,(0,f.b)(l,l,u),2),r}function se(e,t,r,i){const n=te(e);R(n,t.direction,t.origin,r),R(r,n,t.origin,i)}const oe={plane:L(),origin:(0,m.f)(0,0,0),basis1:(0,m.f)(1,0,0),basis2:(0,m.f)(0,1,0)},ae=new C.x(L),le=new C.x(T.Ue),ue=(0,m.c)(),ce=new C.x((()=>({origin:null,basis1:null,basis2:null,plane:null}))),he=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],de=(0,M.c)(),pe=(0,M.c)();function fe(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],i=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}Object.freeze({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=L(),this.origin=(0,m.c)(),this.basis1=(0,m.c)(),this.basis2=(0,m.c)()}},create:F,wrap:function(e,t,r){const i=ce.get();return i.origin=e,i.basis1=t,i.basis2=r,i.plane=q(0,0,0,0,j.o6.get()),U(i),i},copy:B,copyWithoutVerify:function(e,t){(0,f.g)(t.origin,e.origin),(0,f.g)(t.basis1,e.basis1),(0,f.g)(t.basis2,e.basis2),A(e.plane,t.plane)},fromValues:z,updateUnboundedPlane:U,elevate:G,setExtent:function(e,t,r){return H(t,r),G(r,ee(e,e.origin),r),r},fromAABoundingRect:H,intersectRay:Y,intersectRayClosestSilhouette:function(e,t,r){if(Y(e,t,r))return r;const i=$(e,t,j.WM.get());return(0,f.b)(r,t.origin,(0,f.a)(j.WM.get(),t.direction,(0,f.i)(t.origin,i)/(0,f.l)(t.direction))),r},closestPointOnSilhouette:$,closestPoint:J,projectPoint:X,projectPointLocal:K,distance2:Q,distance:function(e,t){return Math.sqrt(Q(e,t))},distanceToSilhouette:function(e,t){let r=Number.NEGATIVE_INFINITY;for(const i of he){const n=ne(e,i,le.get()),s=(0,T.Jk)(n,t);s>r&&(r=s)}return Math.sqrt(r)},extrusionContainsPoint:function(e,t){return k(e.plane,t)&&re(e,t)},axisAt:function(e,t,r,i){return function(e,t,r){switch(t){case 0:(0,f.g)(r,e.basis1),(0,f.n)(r,r);break;case 1:(0,f.g)(r,e.basis2),(0,f.n)(r,r);break;case 2:(0,f.g)(r,te(e))}return r}(e,r,i)},altitudeAt:ee,setAltitudeAt:function(e,t,r,i){const n=ee(e,t),s=(0,f.a)(ue,te(e),r-n);return(0,f.b)(i,t,s),i},equals:function(e,t){return(0,f.k)(e.basis1,t.basis1)&&(0,f.k)(e.basis2,t.basis2)&&(0,f.k)(e.origin,t.origin)},transform:function(e,t,r){return e!==r&&B(e,r),(0,w.b)(de,t),(0,w.a)(de,de),(0,f.m)(r.basis1,e.basis1,de),(0,f.m)(r.basis2,e.basis2,de),(0,f.m)(r.plane,e.plane,de),(0,f.m)(r.origin,e.origin,t),function(e,t,r){e!==r&&A(e,r),r[3]=-(0,f.d)(r,t)}(r.plane,r.origin,r.plane),r},rotate:function(e,t,r,i){return e!==i&&B(e,i),(0,w.d)(pe,(0,w.i)(pe),t,r),(0,f.m)(i.basis1,e.basis1,pe),(0,f.m)(i.basis2,e.basis2,pe),U(i),i},normal:te,UP:oe});class me{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,i=0,n=!1){return(r-=i)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),n&&r===t&&(r=e),r+i}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return(0,b.uZ)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function ge(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}(0,m.c)(),(0,m.c)(),ge(new me(0,2*Math.PI)),ge(new me(-Math.PI,Math.PI)),ge(new me(0,360)),(0,m.c)(),(0,m.c)(),(0,m.c)();var ye=r(17662),be=r(71143),_e=r(99001);class ve{constructor(){this._disposed=!1}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(e,t,r,i,n,s){this.id=(0,_e.D)(),this.geometry=e,this.material=t,this.transformation=r,this.instanceParameters=i,this.origin=n,this._shaderTransformation=s,this._disposed=!1}release(){this._disposed=!1}dispose(){this._disposed=!0}getStaticTransformation(){return this.transformation}getShaderTransformation(){return(0,a.pC)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(e){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,e):this.geometry.computeAttachmentOrigin(e))&&((0,f.m)(e,e,this.getStaticTransformation()),!0)}}ve.pool=new be.Z(ve);class we{constructor(e){this.channel=e,this.id=(0,_e.D)()}}var Me=r(11726),xe=r(84094);class Se extends ye.c{constructor(e={}){super(),this.type=1,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=(0,M.c)(),this._bvObjectSpace=new Te,this._bvWorldSpace=new Te,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==e.castShadow||e.castShadow,this.metadata=e.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new Ce),this.transformation=(0,M.c)();const{geometries:t,materials:r,transformations:i,origins:n}=e;if(Array.isArray(t)){(0,Me.hu)(r.length===t.length,"Object3D: materials don't match geometries"),(0,Me.hu)(i.length===t.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=t.length,this._geometries.length=t.length;for(let e=0;e<t.length;e++)this._geometries[e]=t[e],this._geometryRecords[e]=ve.pool.acquire(t[e],r[e],(0,M.b)(i[e]),{highlights:null,occludees:null,visible:this._visible},n&&n[e])}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(e){(0,w.e)(this._objectTransformation,e),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}dispose(){this._geometryRecords.length=0,this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(e){(0,Me.hu)(null==this._parentLayer||null==e,"Object3D can only be added to a single Layer"),this._parentLayer=e}addGeometry(e,t,r,i,n){r=r||M.I,this._geometries.push(e);const s=ve.pool.acquire(e,t,r,{highlights:null,occludees:null,visible:this._visible},i,n);return this._geometryRecords.push(s),this._hasVolatileTransformation=this._hasVolatileTransformation||(0,a.pC)(s.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:s}),this._invalidateBoundingVolume(),s}removeGeometry(e){const t=this._geometryRecords.splice(e,1)[0];return this._hasVolatileTransformation=(0,a.pC)(t.shaderTransformation)?this._geometryRecords.some((e=>(0,a.pC)(e.shaderTransformation))):this._hasVolatileTransformation,t.dispose(),this._geometries.splice(e,1),this._emit("objectGeometryRemoved",{object:this,record:t}),this._invalidateBoundingVolume(),t}removeAllGeometries(){for(;this.geometryRecords.length>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(e){this._emit("vertexAttrsUpdated",{object:this,record:e}),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(e){if(this._visible!==e){this._visible=e;for(const e of this._geometryRecords)e.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const e=new we(1);for(const t of this._geometryRecords)t.instanceParameters.occludees=(0,xe.lr)(t.instanceParameters.occludees,e);return this._emit("occlusionChanged",this),e}removeOcclude(e){for(const t of this._geometryRecords)t.instanceParameters.occludees=(0,xe.U_)(t.instanceParameters.occludees,e);this._emit("occlusionChanged",this)}highlight(){const e=new we(0);for(const t of this._geometryRecords)t.instanceParameters.highlights=(0,xe.lr)(t.instanceParameters.highlights,e);return this._emit("highlightChanged",this),e}removeHighlight(e){for(const t of this._geometryRecords)t.instanceParameters.highlights=(0,xe.U_)(t.instanceParameters.highlights,e);this._emit("highlightChanged",this)}getCombinedStaticTransformation(e,t){return(0,w.m)((0,a.Pt)(t,(0,M.c)()),this.transformation,e.getStaticTransformation())}getCombinedShaderTransformation(e,t){return t=t||(0,M.c)(),(0,w.m)(t,this.transformation,e.getShaderTransformation()),t}hasVolativeTransformation(){return this._hasVolatileTransformation}get boundingVolumeWorldSpace(){return this._validateBoundingVolume(),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._validateBoundingVolume(),this._bvObjectSpace}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let e=0;e<this._geometryRecords.length;++e){const t=this._geometries[e],r=this._geometryRecords[e],i=t.boundingInfo;(0,a.pC)(i)&&(this._calculateTransformedBoundingVolume(i,this._bvObjectSpace,r.getShaderTransformation()),this._calculateTransformedBoundingVolume(i,this._bvWorldSpace,this.getCombinedShaderTransformation(r)))}(0,f.e)(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5),(0,f.e)(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);const e=(0,m.c)(),t=(0,m.c)(),r=fe(this.transformation);for(let i=0;i<this._geometryRecords.length;++i){const n=this._geometries[i].boundingInfo;if((0,a.Wi)(n))continue;const s=this._geometryRecords[i].getShaderTransformation(),o=fe(s);(0,f.m)(e,n.getCenter(),s);const l=(0,f.i)(e,this._bvObjectSpace.bounds),u=n.getBSRadius()*o;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],l+u),(0,f.m)(t,e,this.transformation);const c=(0,f.i)(t,this._bvWorldSpace.bounds),h=u*r;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],c+h)}this._bvDirty=!1}_calculateTransformedBoundingVolume(e,t,r){const i=e.getBBMin(),n=e.getBBMax(),s=(0,m.a)(i),o=(0,m.a)(n);(0,f.m)(s,s,r),(0,f.m)(o,o,r);for(let e=0;e<3;++e)t.min[e]=Math.min(t.min[e],s[e],o[e]),t.max[e]=Math.max(t.max[e],s[e],o[e]);for(let e=0;e<3;++e){(0,f.g)(s,i),(0,f.g)(o,n),s[e]=n[e],o[e]=i[e],(0,f.m)(s,s,r),(0,f.m)(o,o,r);for(let e=0;e<3;++e)t.min[e]=Math.min(t.min[e],s[e],o[e]),t.max[e]=Math.max(t.max[e],s[e],o[e])}}_invalidateBoundingVolume(){this._bvDirty=!0,(0,a.pC)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}_emit(e,t){(0,a.pC)(this._parentLayer)&&this._parentLayer.events.emit(e,t)}get test(){const e=this;return{hasGeometry:t=>e._geometries.indexOf(t)>-1,getGeometryIndex:t=>e._geometries.indexOf(t)}}}class Ce{constructor(){this.min=(0,m.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,m.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class Te extends Ce{constructor(){super(...arguments),this.bounds=(0,E.c)()}init(){(0,f.s)(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),(0,f.s)(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),(0,E.a)(this.bounds)}}class Ee{constructor(e){this.normal=(0,m.c)(),this.transformation=(0,M.c)(),this._ray=(0,Z.Ue)(),this.init(e)}get ray(){return this._ray}get hasIntersectionPoint(){return null!=this.dist}get distanceInRenderSpace(){if(null!=this.dist)return(0,f.a)(je,this.ray.direction,this.dist),(0,f.l)(je)}getIntersectionPoint(e){return!!this.hasIntersectionPoint&&((0,f.a)(je,this.ray.direction,this.dist),(0,f.b)(e,this.ray.origin,je),!0)}getTransformedNormal(e){return(0,f.g)(Le,this.normal),Le[3]=0,(0,x.t)(Le,Le,this.transformation),(0,f.g)(e,Le),(0,f.n)(e,e),e}init(e){this.dist=void 0,this.target=void 0,this.name=void 0,this.drapedLayerOrder=void 0,this.drapedLayerGraphicOrder=void 0,this.center=null,this.geometryId=null,this.triangleNr=null,this.intersector="Stage",e?(0,Z.JG)(e,this._ray):this._ray=(0,Z.Ue)()}set(e,t,r,i,n,s,o,a,l,u){e instanceof Se&&(e={type:"stage",obj:e}),this.dist=r,(0,f.g)(this.normal,i),(0,w.e)(this.transformation,n),this.target=e,this.name=t,this.drapedLayerOrder=s,this.center=o?(0,m.a)(o):null,this.geometryId=a,this.triangleNr=l,this.drapedLayerGraphicOrder=u}copyFrom(e){(0,Z.JG)(e.ray,this._ray),this.dist=e.dist,this.target=e.target,this.name=e.name,this.drapedLayerOrder=e.drapedLayerOrder,this.center=e.center?(0,m.a)(e.center):null,this.geometryId=e.geometryId,this.triangleNr=e.triangleNr,this.intersector=e.intersector,this.drapedLayerGraphicOrder=e.drapedLayerGraphicOrder,(0,f.g)(this.normal,e.normal),(0,w.e)(this.transformation,e.transformation)}}(0,m.c)();const je=(0,m.c)(),Le=(0,S.c)(),Ae=o.Z.getLogger("esri.layers.VoxelWasmPerScene");class qe{constructor(e){this._halfIntTexturesAvailable=!1,this._useDepthPass=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._renderPass=0,this._renderSlot=3,this._rctx=null,this._renderTargetToRestore=null,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._dbgFlags.add(4),this._view=e,this.initialize()}get canRender(){return!!this._vxl&&"local"===this._view.viewingMode}dbg(e,t){this._dbgFlags.has(e)&&(4===e?Ae.error(t):Ae.warn(t))}removeRenderPlugin(){this._pluginIsActive&&this._view._stage&&(this.dbg(1,"--removeRenderPlugin--"),this._view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}initialize(){this.dbg(1,"--initialize--");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this._readyWatchHandle=(0,c.Ym)((()=>this._view.ready),(e=>{e&&"local"===this._view.viewingMode?(this.dbg(1,"view ready status changed to ready on a local view, calling addRenderPlugin"),this._view._stage.addRenderPlugin([this._renderSlot],this),this._pluginIsActive=!0):(this.dbg(1,"view ready status changed, not ready or not a local view!"),this.removeRenderPlugin())}),{initial:!0}),this._qualityWatchHandle=(0,c.Ym)((()=>{var e;return null==(e=this._view)?void 0:e.qualityProfile}),(e=>{this.dbg(3,"qualityProfile changed to "+e),this._vxl&&this._vxl.set_quality(this.toWasmQuality(e))}),{initial:!0}),this._timeExtentWatchHandle=(0,c.Ym)((()=>{var e;return null==(e=this._view)?void 0:e.timeExtent}),(()=>{if(this._vxl){var e;const t=this._getTimeArgs(null==(e=this._view)?void 0:e.timeExtent);this.dbg(3,"sceneView timeExtent changed to useTime="+t.useTime+" st="+t.startTime+" et="+t.endTime),this._vxl.set_scene_time_extent(t.startTime,t.endTime,t.useTime),this._renderPluginContext.requestRender()}}),{initial:!0})}initializeRenderContext(e){this.dbg(1,"--initializeRenderContext--");const t=e.renderContext.rctx;"webgl2"===t.webglVersion?(this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this.initializeWasm(t.gl)):this.dbg(4,"WebGL 1 context only!")}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this.dbg(1,"--uninitializeRenderContext--")}restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!this._rctx)return void this.dbg(4,"no context in restoreFramebuffer!");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}bindPreviousDepthToSlot(e,t){const r=!!this._rctx,i=!!this._renderTargetToRestore;if(!r||!i)return 0;const n=this._renderTargetToRestore.fbo.depthStencilTexture;return n?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(n,e,!0),1):(this.dbg(4,"no depth/stencil texture exists!"),0)}setBlendState(e,t,r,i){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,r),this._rctx.setBlendEquation(i)):this.dbg(4,"setBlendState callback has no rendering context!")}setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this.dbg(4,"setFrontFace callback has no rendering context!")}setDepthStencilStateFunction(e,t,r){this._rctx?(this._rctx.setDepthFunction(r),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(519,0,255),this._rctx.setStencilOpSeparate(1028,7680,7682,7680),this._rctx.setStencilOpSeparate(1029,7680,7683,7680)):this.dbg(4,"setDepthStencilStateFunction callback has no rendering context!")}setRasterizerState(e){if(this._rctx)switch(e){case 1:this._rctx.setFaceCullingEnabled(!1);break;case 3:this._rctx.setCullFace(1029),this._rctx.setFaceCullingEnabled(!0);break;case 2:this._rctx.setCullFace(1028),this._rctx.setFaceCullingEnabled(!0)}else this.dbg(4,"setRasterizerState callback has no rendering context!")}setViewport(e,t,r,i){this._rctx?this._rctx.setViewport(e,t,r,i):this.dbg(4,"setViewport callback has no rendering context!")}_syncRequestsResponses(){this._layers.forEach(((e,t)=>{const r=[];e.responses.forEach(((e,i)=>{r.push(i),this.dbg(2,"responding for requestID:"+i+" size:"+e.size),this._vxl.respond(t,i,e)}));const i=e.responses;for(const e of r)i.delete(e);const n=this._vxl.get_new_requests(t),s=e.abortController.signal;for(const t in n){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const r=n[t],o={responseType:"array-buffer",signal:s};this.dbg(2,"making requestID:"+t+" url:"+r.url),(0,y.default)(r.url,o).then((n=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this.dbg(2,"have response for requestID:"+t);let s=0;if(n.data.byteLength>0){s=this._vxl._malloc(n.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,s,n.data.byteLength),t=new Uint8Array(n.data);for(let r=0;r<n.data.byteLength;++r)e[r]=t[r]}i.set(+t,{type:r.type,ptr:s,size:n.data.byteLength,success:!0})})).catch((n=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),(0,u.D_)(n)||(this.dbg(4,`requestID:${t} failed, error=${n.toString()}`),i.set(+t,{type:r.type,ptr:0,size:0,success:!1}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){return!(this._vxl||!this._vxlPromise)||!!this._layers.has(e)&&this._layers.get(e).outstandingRequestCount>0}setEnabled(e,t){this._layers.forEach(((r,i)=>{r.layerView===e&&(this._vxl.set_enabled(i,t),this._renderPluginContext.requestRender())}))}setSlices(e,t){const r={mask:2,slices:{planes:t,currentEditPlane:-1}};return this._doMaskedUIUpdate(e,r,!0)}setDynamicSections(e,t){const r={mask:4,dynamicSections:{planes:t,currentEditPlane:-1}};return this._doMaskedUIUpdate(e,r,!0)}setStaticSections(e,t){const r={mask:1,staticSections:t};return this._doMaskedUIUpdate(e,r,!0)}setCurrentVariable(e,t){const r={mask:1024,currentVariable:t};return this._doMaskedUIUpdate(e,r,!0)}setRenderMode(e,t){const r={mask:8192,renderMode:t};return this._doMaskedUIUpdate(e,r,!0)}_doMaskedUIUpdate(e,t,r){if(!this._vxl)return!1;let i=!1;return this._layers.forEach(((r,n)=>{if(r.layerView===e){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._AllocateBlock(e)&&(i=1===this._vxl.handle_masked_ui_update(n,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),i&&r&&this._renderPluginContext.requestRender(),i}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},r=new Promise(((e,r)=>{t.resolveCallback=e,t.rejectCallback=r}));return this._newLayers.push(t),r}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e===t.layerView));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const r=this._newLayers.length;return 0===r&&(this.dbg(1," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),r}let t=-1;this._layers.forEach(((r,i)=>{r.layerView===e&&(t=i,r.abortController.abort(),this._vxl.remove_layer(t))})),t>=0&&this._layers.delete(t);const r=this._layers.size;return 0===r&&(this.dbg(1," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),r}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_AllocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,r=Number.MAX_VALUE,i=!1;return(0,a.pC)(e)&&(e.isAllTime?i=!0:((0,a.pC)(e.start)&&(i=!0,t=e.start.getTime()/1e3),(0,a.pC)(e.end)&&(i=!0,r=e.end.getTime()/1e3))),{startTime:t,endTime:r,useTime:i}}_addVoxelLayer(e){var t;const r=e.layer;let i=-1;const n=r.getConfiguration();if(n.length<1)return-1;const s={str:n,byteCount:0,ptr:0,isReusable:!1};if(!this._AllocateBlock(s))return-1;const o=this._getTimeArgs(null==(t=this._view)?void 0:t.timeExtent),a=this._view.spatialReference.isWGS84&&r.spatialReference.isWGS84?111319.49079327357:1;if(i=this._vxl.add_layer(r.serviceRoot,s.ptr,s.byteCount,a,a,o.startTime,o.endTime,o.useTime),s.isReusable||this._vxl._free(s.ptr),i>=0){const t=new AbortController;if(this._layers.set(i,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:t}),!this._halfIntTexturesAvailable){const t=[];let r="";for(const i of e.layer.variables)"Int16"!==i.renderingFormat.type&&"UInt16"!==i.renderingFormat.type||(t.push(i.name),i.id===e.layer.style.currentVariableId&&(r=i.name));""!==r&&Ae.error(`The voxel layer '${e.layer.title}' cannot render the variable '${r}' in the current browser`),t.length>0&&Ae.warn(`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in the current browser`)}return i}return-1}prepareRender(e){if(!this._vxl)return;const t=e.viewForward,r=e.eye;this._vxl.update_camera_pos_and_direction(r[0],r[1],r[2],t[0],t[1],t[2]);const i=this._vxl.cull();this.dbg(2,"missingResourceCount="+i),this._moreToLoad=i>0,this._havePreparedWithAllLayers=0===this._newLayers.length}render(e){if(!this._vxl)return!1;for(const e of this._newLayers){const t=this._addVoxelLayer(e.layerView);-1===t?e.rejectCallback(-1):e.resolveCallback(t)}if(this._newLayers=[],e.pass!==this._renderPass)return!1;if(e.slot!==this._renderSlot)return!1;if(0===this._layers.size)return this.dbg(4,"No voxel layers but RenderPlugin instance is being asked to render!"),!0;this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._syncRequestsResponses(),this._vxl.begin_frame();const t=this._renderTargetToRestore.viewport;return t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height)),0===t.x&&0===t.y||this.dbg(4,"Unsupported viewport parameters detected!"),this.updateWasmCamera(e.camera),this._vxl.draw(),this._renderTargetToRestore.fbo=null,e.rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),e.rctx.externalVertexArrayObjectUpdate(),e.rctx.externalVertexBufferUpdate(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender(),!0}queryDepthRange(e){this.dbg(1,"--queryDepthRange--");const t=e.viewForward,r=e.eye;this._vxl.update_camera_pos_and_direction(r[0],r[1],r[2],t[0],t[1],t[2]),this._vxl.cull();const i={near:5,far:1e4};return i.near=this._vxl.get_near(),i.far=this._vxl.get_far(),i}destroy(){this.dbg(1,"--destroy--"),this.removeRenderPlugin(),this._readyWatchHandle=(0,a.hw)(this._readyWatchHandle),this._qualityWatchHandle=(0,a.hw)(this._qualityWatchHandle),this._timeExtentWatchHandle=(0,a.hw)(this._timeExtentWatchHandle),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=function(e){return new Promise((t=>r.e(6550).then(r.bind(r,6550)).then((e=>e.v)).then((({default:r})=>{const i=r({locateFile:v,preinitializedWebGLContext:e,onRuntimeInitialized:()=>t(i)})})))).catch((e=>Promise.reject(e)))}(e).then((e=>{var t;if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this.dbg(1," no voxel layers left after WASM downloaded, removing RenderPlugin and destroying"),void this.destroy();const r=this._getTimeArgs(null==(t=this._view)?void 0:t.timeExtent),i=this._vxl.addFunction(this.restoreFramebuffer.bind(this),"v"),n=this._vxl.addFunction(this.setBlendState.bind(this),"viiii"),s=this._vxl.addFunction(this.setFrontFace.bind(this),"vi"),o=this._vxl.addFunction(this.setRasterizerState.bind(this),"vi"),a=this._vxl.addFunction(this.setDepthStencilStateFunction.bind(this),"viii"),l=this._vxl.addFunction(this.setViewport.bind(this),"viiii"),u=this._vxl.addFunction(this.bindPreviousDepthToSlot.bind(this),"iii");this._vxl.initialize_voxel_wasm(i,n,s,o,a,l,u,r.startTime,r.endTime,r.useTime),this._vxl.set_quality(this.toWasmQuality(this._view.qualityProfile)),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this.dbg(4," WASM failed to download, removing RenderPlugin and destroying"),this.destroy()}))),this._vxlPromise)}get type(){return"external"}get isGround(){return!1}get slicePlane(){return!1}get intersectionHandlerId(){return"unj"}intersect(e,t,r,i,n){if(!this._vxl)return;if(!this._rctx)return;if(0===this._layers.size)return;if(n[0]<0||n[0]>e.camera.viewport[2]||n[1]<0||n[1]>e.camera.viewport[3])return;this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()};const s=e.camera.viewForward,o=e.camera.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],s[0],s[1],s[2]),this.updateWasmCamera(e.camera),this._vxl.begin_frame(),this._useDepthPass?this.intersectDepth(e,t,r,i,n):this.intersectObject(e,t,r,i,n),this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate()}intersectObject(e,t,r,i,n){const s=this._vxl.pick_object(n[0],n[1]);if(s.success){const n=(0,m.c)();(0,f.w)(n,i,r),(0,f.n)(n,n);const o=(0,f.i)(r,i),a=(0,m.c)();(0,f.s)(a,s.worldX,s.worldY,s.worldZ);const l=(0,m.c)();(0,f.w)(l,a,r);const u=(0,m.c)();(0,f.a)(u,n,(0,f.d)(l,n));const c=(0,m.c)();(0,f.b)(c,r,u);const h=(0,f.i)(r,c),d=(0,b.uZ)(h/o,0,1),p=e=>{e.intersector="Voxel",e.dist=d,e.target={type:"external",metadata:{layerUid:this.intersectionHandlerId}}},g=e.results.min;(null==g.dist||d<g.dist)&&(null==t||t(r,i,d))&&p(g);const y=e.results.max;if(0!==e.options.store&&(null==y.dist||d>y.dist)&&(null==t||t(r,i,d))&&p(y),2===e.options.store){const t=new Ee(e.ray);p(t),e.results.all.push(t)}}}intersectDepth(e,t,r,i,n){const s=this._vxl.pick_depth(n[0],n[1]);if(s.success){const n=(0,m.c)();(0,f.w)(n,i,r),(0,f.n)(n,n);const o=(0,f.i)(r,i),a=(0,m.c)();(0,f.s)(a,s.worldX,s.worldY,s.worldZ);const l=(0,m.c)();(0,f.w)(l,a,r);const u=(0,m.c)();(0,f.a)(u,n,(0,f.d)(l,n));const c=(0,m.c)();(0,f.b)(c,r,u);const h=(0,f.i)(r,c),d=(0,b.uZ)(h/o,0,1),p=e=>{e.intersector="Voxel",e.dist=d,e.target={type:"external",metadata:{layerUid:this.intersectionHandlerId}}},g=e.results.min;(null==g.dist||d<g.dist)&&(null==t||t(r,i,d))&&p(g);const y=e.results.max;if(0!==e.options.store&&(null==y.dist||d>y.dist)&&(null==t||t(r,i,d))&&p(y),2===e.options.store){const t=new Ee(e.ray);p(t),e.results.all.push(t)}}}toWasmQuality(e){switch(e){case"low":return 0;case"medium":return 1;case"high":return 2}}}class Ie{constructor(){this.view2WASM=new Map}static getInstance(){return Ie.instance||(Ie.instance=new Ie),Ie.instance}isUpdating(e,t){return!!this.view2WASM.has(e)&&this.view2WASM.get(e).isUpdating(t)}addLayer(e,t){return this.view2WASM.has(e)||this.view2WASM.set(e,new qe(e)),this.view2WASM.get(e).addVoxelLayer(t)}removeLayer(e,t){this.view2WASM.has(e)&&this.view2WASM.get(e).removeVoxelLayer(t)<1&&this.view2WASM.delete(e)}setLayerEnabled(e,t,r){this.view2WASM.has(e)&&this.view2WASM.get(e).setEnabled(t,r)}setLayerSlices(e,t){let r=!1;return this.view2WASM.forEach(((i,n)=>{n.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((n=>{n.layer===e&&(r=i.setSlices(n,t))}))})),r}setLayerDynamicSections(e,t){let r=!1;return this.view2WASM.forEach(((i,n)=>{n.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((n=>{n.layer===e&&(r=i.setDynamicSections(n,t))}))})),r}setLayerCurrentVariable(e,t){let r=!1;return this.view2WASM.forEach(((i,n)=>{n.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((n=>{n.layer===e&&(r=i.setCurrentVariable(n,t))}))})),r}setLayerRenderMode(e,t){let r=!1;return this.view2WASM.forEach(((i,n)=>{n.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((n=>{n.layer===e&&(r=i.setRenderMode(n,t))}))})),r}setLayerStaticSections(e,t){let r=!1;return this.view2WASM.forEach(((i,n)=>{n.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((n=>{n.layer===e&&(r=i.setStaticSections(n,t))}))})),r}}var Re=r(54295),Ve=r(17287),Oe=r(38009),ke=r(16859),Pe=r(72965),Ne=r(13496),Ze=r(21506),We=r(10736);let De=class extends We.wq{constructor(){super(...arguments),this.enabled=!0,this.label="",this.normal=null,this.point=null}};(0,i._)([(0,h.Cb)({type:Boolean,json:{default:!0,write:!0}})],De.prototype,"enabled",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],De.prototype,"label",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:!0}})],De.prototype,"normal",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:!0}})],De.prototype,"point",void 0),De=(0,i._)([(0,p.j)("esri.layers.support.VoxelDynamicSection")],De);const Fe=De;let Be=class extends We.wq{constructor(){super(...arguments),this.enabled=!0,this.label="",this.normal=null,this.point=null}};(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],Be.prototype,"enabled",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],Be.prototype,"label",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:!0}})],Be.prototype,"normal",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:!0}})],Be.prototype,"point",void 0),Be=(0,i._)([(0,p.j)("esri.layers.support.VoxelSlice")],Be);const ze=Be;let Ue=class extends We.wq{constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}};(0,i._)([(0,h.Cb)({type:Boolean,json:{default:!0,write:!0}})],Ue.prototype,"enabled",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"href",void 0),(0,i._)([(0,h.Cb)({type:d.z8,json:{write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"id",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],Ue.prototype,"label",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"normal",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"point",void 0),(0,i._)([(0,h.Cb)({type:[d.z8],json:{write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"sizeInPixel",void 0),(0,i._)([(0,h.Cb)({type:[ze],json:{write:!0}})],Ue.prototype,"slices",void 0),(0,i._)([(0,h.Cb)({type:d.z8,json:{default:0,write:!0}})],Ue.prototype,"timeId",void 0),(0,i._)([(0,h.Cb)({type:d.z8,json:{write:{enabled:!0,isRequired:!0}}})],Ue.prototype,"variableId",void 0),Ue=(0,i._)([(0,p.j)("esri.layers.support.VoxelSection")],Ue);const Ge=Ue;var He=r(70921);let Ye=class extends We.wq{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,i._)([(0,h.Cb)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],Ye.prototype,"diffuseFactor",void 0),(0,i._)([(0,h.Cb)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],Ye.prototype,"specularFactor",void 0),Ye=(0,i._)([(0,p.j)("esri.layers.support.VoxelSimpleShading")],Ye);const $e=Ye;var Je=r(22303);let Xe=class extends We.wq{constructor(){super(...arguments),this.color=null,this.value=null,this.enabled=!0,this.label=null}};(0,i._)([(0,h.Cb)({type:Je.Z,json:{type:[d.z8],write:{enabled:!0,isRequired:!0}}})],Xe.prototype,"color",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Xe.prototype,"value",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{default:!0,write:!0}})],Xe.prototype,"enabled",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],Xe.prototype,"label",void 0),Xe=(0,i._)([(0,p.j)("esri.layers.support.VoxelIsosurface")],Xe);const Ke=Xe;let Qe=class extends We.wq{constructor(){super(...arguments),this.alpha=0,this.position=0}};(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Qe.prototype,"alpha",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Qe.prototype,"position",void 0),Qe=(0,i._)([(0,p.j)("esri.layers.support.VoxelAlphaStop")],Qe);const et=Qe;let tt=class extends We.wq{constructor(){super(...arguments),this.color=null,this.position=0}};(0,i._)([(0,h.Cb)({type:Je.Z,json:{type:[d.z8],write:{enabled:!0,isRequired:!0}}})],tt.prototype,"color",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],tt.prototype,"position",void 0),tt=(0,i._)([(0,p.j)("esri.layers.support.VoxelColorStop")],tt);const rt=tt;let it=class extends We.wq{constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,i._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],it.prototype,"enabled",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:!0}})],it.prototype,"range",void 0),it=(0,i._)([(0,p.j)("esri.layers.support.VoxelRangeFilter")],it);const nt=it;let st=class extends We.wq{constructor(e){super(e),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this.colorStops=new n.Z,this.alphaStops=new n.Z}set colorStops(e){this._set("colorStops",(0,He.Z)(e,this._get("colorStops"),n.Z.ofType(rt)))}set alphaStops(e){this._set("alphaStops",(0,He.Z)(e,this._get("alphaStops"),n.Z.ofType(et)))}};(0,i._)([(0,h.Cb)({type:["linear","nearest"],json:{write:!0}})],st.prototype,"interpolation",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],st.prototype,"stretchRange",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(rt),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],st.prototype,"colorStops",null),(0,i._)([(0,h.Cb)({type:n.Z.ofType(et),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.alphaStops&&this.alphaStops.length>0}}}}})],st.prototype,"alphaStops",null),(0,i._)([(0,h.Cb)({type:nt,json:{write:!0}})],st.prototype,"rangeFilter",void 0),st=(0,i._)([(0,p.j)("esri.layers.support.VoxelTransferFunctionStyle")],st);const ot=st;let at=class extends We.wq{constructor(){super(...arguments),this.color=null,this.value=0,this.enabled=!0,this.label=null}};(0,i._)([(0,h.Cb)({type:Je.Z,json:{type:[d.z8],write:{enabled:!0,isRequired:!0}}})],at.prototype,"color",void 0),(0,i._)([(0,h.Cb)({type:d.z8,json:{write:{enabled:!0,isRequired:!0}}})],at.prototype,"value",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{default:!0,write:!0}})],at.prototype,"enabled",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],at.prototype,"label",void 0),at=(0,i._)([(0,p.j)("esri.layers.support.VoxelUniqueValue")],at);const lt=at;let ut=class extends We.wq{constructor(e){super(e),this.variableId=0,this.label=null,this.transferFunction=null,this.uniqueValues=new n.Z,this.isosurfaces=new n.Z}set uniqueValues(e){this._set("uniqueValues",(0,He.Z)(e,this._get("uniqueValues"),n.Z.ofType(lt)))}set isosurfaces(e){this._set("isosurfaces",(0,He.Z)(e,this._get("isosurfaces"),n.Z.ofType(Ke)))}};(0,i._)([(0,h.Cb)({type:d.z8,json:{write:{enabled:!0,isRequired:!0}}})],ut.prototype,"variableId",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],ut.prototype,"label",void 0),(0,i._)([(0,h.Cb)({type:ot,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],ut.prototype,"transferFunction",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(lt),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],ut.prototype,"uniqueValues",null),(0,i._)([(0,h.Cb)({type:n.Z.ofType(Ke),json:{write:{enabled:!0,overridePolicy(){const e=!this.uniqueValues||this.uniqueValues.length<1,t=!!this.isosurfaces&&this.isosurfaces.length>0;return{enabled:e&&t}}}}})],ut.prototype,"isosurfaces",null),ut=(0,i._)([(0,p.j)("esri.layers.support.VoxelVariableStyle")],ut);const ct=ut;let ht=class extends We.wq{constructor(e){super(e),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new n.Z,this.dynamicSections=new n.Z}set slices(e){this._set("slices",(0,He.Z)(e,this._get("slices"),n.Z.ofType(ze)))}set dynamicSections(e){this._set("dynamicSections",(0,He.Z)(e,this._get("dynamicSections"),n.Z.ofType(Fe)))}};(0,i._)([(0,h.Cb)({type:d.z8,json:{write:{enabled:!0,isRequired:!0}}})],ht.prototype,"volumeId",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{default:1,write:!0}})],ht.prototype,"verticalExaggeration",void 0),(0,i._)([(0,h.Cb)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],ht.prototype,"exaggerationMode",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{default:0,write:!0}})],ht.prototype,"verticalOffset",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(ze),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],ht.prototype,"slices",null),(0,i._)([(0,h.Cb)({type:n.Z.ofType(Fe),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],ht.prototype,"dynamicSections",null),ht=(0,i._)([(0,p.j)("esri.layers.support.VoxelVolumeStyle")],ht);const dt=ht;let pt=class extends We.wq{constructor(e){super(e),this.currentVariableId=0,this.renderMode="volume",this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new $e,this.volumeStyles=new n.Z,this.variableStyles=new n.Z}set volumeStyles(e){this._set("volumeStyles",(0,He.Z)(e,this._get("volumeStyles"),n.Z.ofType(dt)))}set variableStyles(e){this._set("variableStyles",(0,He.Z)(e,this._get("variableStyles"),n.Z.ofType(ct)))}};(0,i._)([(0,h.Cb)({type:n.Z.ofType(dt),json:{write:!0}})],pt.prototype,"volumeStyles",null),(0,i._)([(0,h.Cb)({type:d.z8,json:{write:{enabled:!0,isRequired:!0}}})],pt.prototype,"currentVariableId",void 0),(0,i._)([(0,h.Cb)({type:["volume","surfaces"],json:{write:!0}})],pt.prototype,"renderMode",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(ct),json:{write:!0}})],pt.prototype,"variableStyles",null),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],pt.prototype,"enableSlices",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],pt.prototype,"enableSections",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],pt.prototype,"enableDynamicSections",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],pt.prototype,"enableIsosurfaces",void 0),(0,i._)([(0,h.Cb)({type:$e,json:{write:!0}})],pt.prototype,"shading",void 0),pt=(0,i._)([(0,p.j)("esri.layers.support.VoxelStyle")],pt);const ft=pt;let mt=class extends We.wq{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,i._)([(0,h.Cb)({type:["discrete","continuous"],json:{write:!0}})],mt.prototype,"continuity",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"hasNoData",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],mt.prototype,"noData",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],mt.prototype,"offset",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],mt.prototype,"scale",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],mt.prototype,"type",void 0),mt=(0,i._)([(0,p.j)("esri.layers.support.VoxelFormat")],mt);const gt=mt;let yt=class extends We.wq{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],yt.prototype,"id",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],yt.prototype,"description",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],yt.prototype,"name",void 0),(0,i._)([(0,h.Cb)({type:gt,json:{write:!0}})],yt.prototype,"originalFormat",void 0),(0,i._)([(0,h.Cb)({type:gt,json:{write:{enabled:!0,isRequired:!0}}})],yt.prototype,"renderingFormat",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],yt.prototype,"unit",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],yt.prototype,"volumeId",void 0),(0,i._)([(0,h.Cb)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],yt.prototype,"type",void 0),yt=(0,i._)([(0,p.j)("esri.layers.support.VoxelVariable")],yt);const bt=yt;let _t=class extends We.wq{constructor(){super(...arguments),this.values=null}};(0,i._)([(0,h.Cb)({type:[Number],json:{write:!0}})],_t.prototype,"values",void 0),_t=(0,i._)([(0,p.j)("esri.layers.support.VoxelIrregularSpacing")],_t);const vt=_t;let wt=class extends We.wq{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],wt.prototype,"scale",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],wt.prototype,"offset",void 0),wt=(0,i._)([(0,p.j)("esri.layers.support.VoxelRegularSpacing")],wt);const Mt=wt;let xt=class extends We.wq{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=null,this.isWrappedDateLine=null,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}};(0,i._)([(0,h.Cb)({type:vt,json:{write:!0}})],xt.prototype,"irregularSpacing",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],xt.prototype,"isPositiveUp",void 0),(0,i._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],xt.prototype,"isWrappedDateLine",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],xt.prototype,"label",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],xt.prototype,"name",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],xt.prototype,"quantity",void 0),(0,i._)([(0,h.Cb)({type:Mt,json:{write:!0}})],xt.prototype,"regularSpacing",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:!0}})],xt.prototype,"size",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],xt.prototype,"unit",void 0),xt=(0,i._)([(0,p.j)("esri.layers.support.VoxelDimension")],xt);const St=xt;let Ct=class extends We.wq{constructor(){super(...arguments),this.id=0,this.dimensions=null}getZDimension(){if(!this.dimensions)return-1;if(!Array.isArray(this.dimensions))return-1;if(4!==this.dimensions.length)return-1;for(let e=2;e<4;++e)if(this.dimensions[e].size>0)return e;return-1}isVolumeValid(){return!!this.dimensions&&!!Array.isArray(this.dimensions)&&4===this.dimensions.length&&!(this.dimensions[0].size<1||this.dimensions[1].size<1)&&-1!==this.getZDimension()}};(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Ct.prototype,"id",void 0),(0,i._)([(0,h.Cb)({type:[St],json:{write:{enabled:!0,isRequired:!0}}})],Ct.prototype,"dimensions",void 0),Ct=(0,i._)([(0,p.j)("esri.layers.support.VoxelVolume")],Ct);const Tt=Ct;var Et;let jt=Et=class extends We.wq{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const e=new Et;return e.apronWidth===this.apronWidth&&e.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}};(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],jt.prototype,"apronWidth",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],jt.prototype,"brickSize",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],jt.prototype,"maxLodLevel",void 0),(0,i._)([(0,h.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],jt.prototype,"nodeSize",void 0),jt=Et=(0,i._)([(0,p.j)("esri.layers.support.VoxelVolumeIndex")],jt);const Lt=jt,At=o.Z.getLogger(" esri.layers.VoxelLayer");let qt=class extends((0,Ne.V)((0,Ve.Y)((0,Oe.q)((0,ke.I)((0,Pe.M)((0,l.R)((0,Re.V)(g.Z)))))))){constructor(e){super(e),this.serviceRoot="",this.popupEnabled=!0,this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.url=null,this.sections=new n.Z,this.style=null,this.opacity=1,this.variables=new n.Z,this.volumes=new n.Z,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this._dbgFlags=new Set,this._handles=new s.Z,this._dbgFlags.add(3)}destroy(){this._handles=(0,a.SC)(this._handles)}dbg(e,t){this._dbgFlags.has(e)&&(3===e?At.error(t):At.warn(t))}load(e){const t=(0,a.pC)(e)?e.signal:null,r=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(u.r9).then((()=>this._fetchService(t))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(r),Promise.resolve(this)}getConfiguration(){this._handles.add([(0,c.Ym)((()=>this._getRenderMode()),(e=>this._pushRenderModeToWasm(e))),(0,c.Ym)((()=>this._getCurrentVariableId()),(e=>this._pushCurrentVariableIdToWasm(e))),(0,c.Ym)((()=>this._getDynamicSections()),(e=>this._pushDynamicSectionsToWasm(e))),(0,c.Ym)((()=>this._getSlices()),(e=>this._pushSlicesToWasm(e))),(0,c.Ym)((()=>this._getSections()),(e=>this._pushSectionsToWasm(e)))]);const e={layerType:this.operationalLayerType,version:"3.0",name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index.toJSON(),sections:this.sections.toJSON(),style:this.style};return e.index&&this.index.isValid()?JSON.stringify(e):""}_getSections(){const e=[];for(const t of this.sections)e.push(new Ge({enabled:t.enabled,href:t.href,id:t.id,label:t.label,normal:t.normal,point:t.point,sizeInPixel:t.sizeInPixel,slices:t.slices,timeId:t.timeId,variableId:t.variableId}));return e}_pushSectionsToWasm(e){this.dbg(2,"VoxelLayer._pushSectionsToWasm() called"),Ie.getInstance().setLayerStaticSections(this,e)||this.dbg(3,"VoxelLayer._pushSectionsToWasm() failed!")}_isPlaneValid(e,t,r){if(!e.point)return!1;if(!Array.isArray(e.point)||3!==e.point.length)return!1;if(!e.normal)return!1;if(!Array.isArray(e.normal)||3!==e.normal.length)return!1;for(let i=0;i<3;++i){const n=e.point[i];if(n<0||n>=r[t[i]].size)return!1}const i=(0,m.f)(e.normal[0],e.normal[1],e.normal[2]);return(0,f.n)(i,i),!(Math.abs(i[0])+Math.abs(i[1])+Math.abs(i[2])<1e-6||(e.normal[0]=i[0],e.normal[1]=i[1],e.normal[2]=i[2],0))}_getVariable(e){let t=-1;if(t=(0,a.pC)(e)?e:this.style.currentVariableId,-1===t)return null;const r=this.variables.findIndex((e=>e.id===t));return r<0?null:this.variables.getItemAt(r)}_getVolume(e){const t=this._getVariable(e);return(0,a.pC)(t)?this.volumes.find((({id:e})=>e===t.volumeId)):null}_getVolumeStyle(e){const t=this._getVariable(e);return(0,a.pC)(t)?this.style.volumeStyles.find((({volumeId:e})=>e===t.volumeId)):null}_getSlices(){const e=[],t=this._getVolume(null);if(!(0,a.pC)(t)||!t.isVolumeValid())return e;const r=this._getVolumeStyle(null);if(!(0,a.pC)(r))return e;for(const i of r.slices)this._isPlaneValid(i,[0,1,t.getZDimension()],t.dimensions)?e.push(new ze({enabled:i.enabled,label:i.label,point:i.point,normal:i.normal})):e.push(new ze({enabled:!1,label:"invalid",point:i.point,normal:i.normal}));return e}_pushSlicesToWasm(e){this.dbg(2,"VoxelLayer._pushSlicesToWasm() called!"),Ie.getInstance().setLayerSlices(this,e)||this.dbg(3,"VoxelLayer._pushSlicesToWasm() failed!")}_getDynamicSections(){const e=[],t=this._getVolume(null);if(!(0,a.pC)(t)||!t.isVolumeValid())return e;const r=this._getVolumeStyle(null);if(!(0,a.pC)(r))return e;for(const i of r.dynamicSections)this._isPlaneValid(i,[0,1,t.getZDimension()],t.dimensions)?e.push(new Fe({enabled:i.enabled,label:i.label,point:i.point,normal:i.normal})):e.push(new Fe({enabled:!1,label:"invalid",point:i.point,normal:i.normal}));return e}_pushDynamicSectionsToWasm(e){this.dbg(2,"VoxelLayer._pushDynamicSectionsToWasm() called!"),Ie.getInstance().setLayerDynamicSections(this,e)||this.dbg(3,"VoxelLayer._updateDynamicSections() failed!")}_getCurrentVariableId(){return this.style?this.style.currentVariableId:-1}_pushCurrentVariableIdToWasm(e){this.dbg(2,"VoxelLayer._pushCurrentVariableIdToWasm() called!"),Ie.getInstance().setLayerCurrentVariable(this,e)||this.dbg(3,"VoxelLayer._pushCurrentVariableIdToWasm() failed!")}_getRenderMode(){return this.style?this.style.renderMode:"volume"}_pushRenderModeToWasm(e){this.dbg(2,"VoxelLayer._pushRenderModeToWasm() called!"),Ie.getInstance().setLayerRenderMode(this,e)||this.dbg(3,"VoxelLayer.setLayerRenderMode() failed!")}};(0,i._)([(0,h.Cb)(Ze.C_)],qt.prototype,"popupEnabled",void 0),(0,i._)([(0,h.Cb)({type:["Voxel"]})],qt.prototype,"operationalLayerType",void 0),(0,i._)([(0,h.Cb)(Ze.rn)],qt.prototype,"legendEnabled",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],qt.prototype,"title",void 0),(0,i._)([(0,h.Cb)({type:String,json:{write:!0}})],qt.prototype,"url",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(Ge),json:{write:!0,origins:{"web-scene":{name:"layerDefinition.sections",write:!0},service:{write:!1}}}})],qt.prototype,"sections",void 0),(0,i._)([(0,h.Cb)({type:ft,json:{write:!0,origins:{"web-scene":{name:"layerDefinition.style",write:!0},service:{write:!1}}}})],qt.prototype,"style",void 0),(0,i._)([(0,h.Cb)({type:["show","hide"]})],qt.prototype,"listMode",void 0),(0,i._)([(0,h.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],qt.prototype,"opacity",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(bt)})],qt.prototype,"variables",void 0),(0,i._)([(0,h.Cb)({type:n.Z.ofType(Tt)})],qt.prototype,"volumes",void 0),(0,i._)([(0,h.Cb)({type:Lt})],qt.prototype,"index",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{name:"layerDefinition.minScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],qt.prototype,"minScale",void 0),(0,i._)([(0,h.Cb)({type:Number,json:{name:"layerDefinition.maxScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],qt.prototype,"maxScale",void 0),(0,i._)([(0,h.Cb)({json:{read:!1},readOnly:!0})],qt.prototype,"type",void 0),qt=(0,i._)([(0,p.j)("esri.layers.VoxelLayer")],qt);const It=qt},38009:(e,t,r)=>{r.d(t,{q:()=>p});var i=r(43697),n=r(20102),s=r(17452),o=r(5600),a=(r(67676),r(80442),r(75215),r(52011)),l=r(30556),u=r(50549),c=r(76169);const h={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var d=r(21506);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&(0,c.df)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){!e||i&&"tables"===i.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e||"Layer"}read(e,t){t&&(t.layer=this),(0,u.$Z)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(null!=t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,i=h[e];let s=i&&i[this.operationalLayerType];var r;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(s=!1),!s)return null==(r=t.messages)||r.push(new n.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const i=super.write(e,{...t,layer:this}),o=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.Z&&"web-document-write:property-required"===e.name)).length;var a;return(0,s.jc)(null==i?void 0:i.url)?(null==t||null==(a=t.messages)||a.push(new n.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:i}beforeSave(){}};return(0,i._)([(0,o.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),(0,i._)([(0,l.c)("listMode")],t.prototype,"writeListMode",null),(0,i._)([(0,o.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),(0,i._)([(0,l.c)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i._)([(0,o.Cb)(d.Oh)],t.prototype,"opacity",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i._)([(0,l.c)("title")],t.prototype,"writeTitle",null),(0,i._)([(0,o.Cb)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=(0,i._)([(0,a.j)("esri.layers.mixins.OperationalLayer")],t),t}},72965:(e,t,r)=>{r.d(t,{M:()=>o});var i=r(43697),n=r(5600),s=(r(67676),r(80442),r(75215),r(52011));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get scaleRangeId(){return`${this.minScale},${this.maxScale}`}};return(0,i._)([(0,n.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,i._)([(0,n.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],t.prototype,"scaleRangeId",null),t=(0,i._)([(0,s.j)("esri.layers.mixins.ScaleRangeLayer")],t),t}},21506:(e,t,r)=>{r.d(t,{qG:()=>v,PV:()=>g,id:()=>M,iR:()=>p,rn:()=>m,u1:()=>S,rO:()=>x,Oh:()=>b,bT:()=>_,C_:()=>d,Lx:()=>y,vg:()=>w,YI:()=>h,HQ:()=>f});var i=r(92835),n=r(6570),s=r(82971),o=r(25929),a=r(70586),l=(r(95330),r(35463)),u=r(20682),c=r(65242);const h={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},d={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},p={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},f={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:o.w}}},m={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},g={value:null,type:u.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function y(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const b={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},_={...b,json:{...b.json,origins:{"web-document":{...b.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,c.b)(t.layerDefinition.drawingInfo.transparency):void 0:(0,c.b)(t.drawingInfo.transparency)}}},v={type:i.Z,readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:r,timeOffset:n,useViewTime:s}=this.layer,o=null==(t=this.view)?void 0:t.timeExtent;let u=this.layer.timeExtent;r&&(u=function(e){if(!e)return e;const{start:t,end:r}=e;return new i.Z({start:(0,a.pC)(t)?(0,l.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:(0,a.pC)(r)?(0,l.Nm)(r,r.getTimezoneOffset(),"minutes"):r})}(u));let c=s?o&&u?o.intersection(u):o||u:u;if(!c||c.isEmpty||c.isAllTime)return c;n&&(c=c.offset(-n.value,n.unit)),r&&(c=function(e){if(!e)return e;const{start:t,end:r}=e;return new i.Z({start:(0,a.pC)(t)?(0,l.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:(0,a.pC)(r)?(0,l.Nm)(r,-r.getTimezoneOffset(),"minutes"):r})}(c));const h=this._get("timeExtent");return c.equals(h)?h:c}},w={type:n.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=n.Z.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=s.Z.fromJSON(t.spatialReference)),r}}}},read:!1}},M={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},x={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},3172:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var i=r(68773),n=r(40330),s=r(20102),o=r(16358),a=r(80442),l=r(22974),u=r(70586),c=r(95330),h=r(17452),d=r(71058),p=r(85958);async function f(e,t){var l;const p=(0,h.HK)(e),b=(0,h.jc)(e);b||p||(e=(0,h.Fv)(e));const _={url:e,requestOptions:{...(0,u.Wg)(t)}};let v=(0,h.oh)(e);if(v){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(e){r=S("request:interceptor",e,t)}if((i instanceof Error||i instanceof s.Z)&&(r=S("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}(v,_);if(null!=e)return{data:e,getHeader:w,requestOptions:_.requestOptions,url:_.url};v.after||v.error||(v=null)}if(e=_.url,"image"===(t=_.requestOptions).responseType){if((0,a.Z)("host-webworker")||(0,a.Z)("host-node"))throw S("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),_)}else if(p)throw S("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),_);if("head"===t.method){if(t.body)throw S("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),_);if(p||b)throw S("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),_)}if(await async function(){(0,a.Z)("host-webworker")?m||(m=await Promise.all([r.e(102),r.e(9884)]).then(r.bind(r,29884))):f._abortableFetch||(f._abortableFetch=o.Z.fetch.bind(o.Z))}(),m)return m.execute(e,t);const M=new AbortController;(0,c.fu)(t,(()=>M.abort()));const x={controller:M,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:v,params:_,redoRequest:!1,useIdentity:g.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},j=await async function(e){var t,r;let s,a;await async function(e){const t=e.params.url,r=e.params.requestOptions,s=e.controller.signal,a=r.body;let l=null,u=null,h=null;if(y&&"HTMLFormElement"in o.Z&&(a instanceof FormData?l=a:a instanceof HTMLFormElement&&(u=a,l=new FormData(u))),"string"==typeof a&&(h=a),e.fetchOptions={cache:r.cacheBust&&!f._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:s},(l||h)&&(e.fetchOptions.body=l||h),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||l&&l.get&&l.get("token")||u&&u.elements.token),!e.hasToken&&i.Z.apiKey&&(0,d.r)(t)&&(r.query||(r.query={}),r.query.token=i.Z.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!T(t)&&!(0,c.Hc)(s)){let i;"immediate"===r.authMode?(await C(),i=await n.id.getCredential(t,{signal:s}),e.credential=i):"no-prompt"===r.authMode?(await C(),i=await n.id.getCredential(t,{prompt:!1,signal:s}).catch((()=>{})),e.credential=i):n.id&&(i=n.id.findCredential(t)),i&&(e.credentialToken=i.token,e.useSSL=!!i.ssl)}}(e);try{do{[s,a]=await E(e)}while(!await L(e,s,a))}catch(t){const r=S("request:server",t,e.params,s);throw r.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(r),r}const l=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(l)&&!e.hasToken&&!e.credentialToken&&null!=(t=a)&&null!=(r=t.user)&&r.username&&!(0,h.kl)(l)){const e=(0,h.P$)(l,!0);e&&g.trustedServers.push(e)}const u=e.credential;if(u&&n.id){const e=n.id.findServerInfo(u.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=n.id.findCredential(t,u.userId);e&&-1===n.id._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:a,getHeader:s?e=>s.headers.get(e):w,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(x);return null==(l=v)||null==l.after||l.after(j),j}let m;const g=i.Z.request,y="FormData"in o.Z,b=[499,498,403,401],_=["COM_0056","COM_0057","SB_0008"],v=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],w=()=>null,M=Symbol();function x(e){const t=(0,h.P$)(e);return!t||t.endsWith(".arcgis.com")||f._corsServers.includes(t)||(0,h.kl)(t)}function S(e,t,r,i){let n="Error";const o={url:r.url,requestOptions:r.requestOptions,getHeader:w,ssl:!1};if(t instanceof s.Z)return t.details?(t.details=(0,l.d9)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=o,t;if(t){const e=i&&(e=>i.headers.get(e)),r=i&&i.status,s=t.message;s&&(n=s),e&&(o.getHeader=e),o.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,o.subCode=t.subcode,o.messageCode=t.messageCode,"string"==typeof t.details?o.messages=[t.details]:o.messages=t.details,o.raw=M in t?t[M]:t}return(0,c.D_)(t)?(0,c.zE)():new s.Z(e,n,o)}async function C(){n.id||await Promise.all([r.e(7824),r.e(8778),r.e(102),r.e(9625)]).then(r.bind(r,79339))}function T(e){return v.some((t=>t.test(e)))}async function E(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions,s=(0,h.jc)(t)||(0,h.HK)(t),o=r.responseType||"json",l=s?0:null!=r.timeout?r.timeout:g.timeout;let u=!1;if(!s){e.useSSL&&(t=(0,h.hO)(t)),r.cacheBust&&"default"===i.cache&&(t=(0,h.ZN)(t,"request.preventCache",Date.now()));let s={...r.query};e.credentialToken&&(s.token=e.credentialToken);let o=(0,h.B7)(s);(0,a.Z)("esri-url-encodes-apostrophe")&&(o=o.replace(/'/g,"%27"));const l=t.length+1+o.length;let c;u="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||l>g.maxUrlLength;const d=r.useProxy||!!(0,h.ed)(t);if(d){const e=(0,h.b7)(t);c=e.path,!u&&c.length+1+l>g.maxUrlLength&&(u=!0),e.query&&(s={...e.query,...s})}if("HEAD"===i.method&&(u||d)){if(u){if(l>g.maxUrlLength)throw S("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw S("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(d)throw S("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(u?(i.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=(0,h.fl)(t,s):(i.body=(0,h.B7)(s),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=(0,h.fl)(t,s),d&&(e.useProxy=!0,t=`${c}?${t}`),s.token&&y&&i.body instanceof FormData){const e=i.body;e.set?e.set("token",s.token):e.append("token",s.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!(0,h.D6)(t,h.Gd))if((0,h.kl)(t))e.withCredentials=!0;else if(n.id){const r=n.id.findServerInfo(t);r&&r.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(i.credentials="include")}let d,p,m=0,b=!1;l>0&&(m=setTimeout((()=>{b=!0,e.controller.abort()}),l));try{if("native-request-init"===r.responseType)p=i,p.url=t;else if("image"!==r.responseType||"default"!==i.cache||"GET"!==i.method||u||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!s&&!e.useProxy&&g.proxyUrl&&!x(t)){if(d=await f._abortableFetch(t,i),e.useProxy||function(e){const t=(0,h.P$)(e);t&&!f._corsServers.includes(t)&&f._corsServers.push(t)}(t),"native"===r.responseType)p=d;else if("HEAD"!==i.method)if(d.ok){switch(o){case"array-buffer":p=await d.arrayBuffer();break;case"blob":case"image":p=await d.blob();break;default:p=await d.text()}if(m&&(clearTimeout(m),m=0),"json"===o||"xml"===o||"document"===o)if(p)switch(o){case"json":p=JSON.parse(p);break;case"xml":p=j(p,"application/xml");break;case"document":p=j(p,"text/html")}else p=null;if(p){if("array-buffer"===o||"blob"===o){const e=d.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&p["blob"===o?"size":"byteLength"]<=750)try{const e=await new Response(p).json();e.error&&(p=e)}catch{}}"image"===o&&p instanceof Blob&&(p=await A(URL.createObjectURL(p),e,!0))}}else p=await d.text()}else p=await A(t,e)}catch(i){if("AbortError"===i.name){if(b)throw new Error("Timeout exceeded");throw(0,c.zE)("Request canceled")}if(!(!d&&i instanceof TypeError&&g.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||x(t))throw i;e.redoRequest=!0,(0,h.tD)({proxyUrl:g.proxyUrl,urlPrefix:(0,h.P$)(t)})}finally{m&&clearTimeout(m)}return[d,p]}function j(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function L(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||"native"===i.responseType||"native-request-init"===i.responseType)return!0;let s,o,a,l;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[M]=r,s;null!=r&&r.error&&(s=r.error),s&&(o=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,l=s.messageCode,l=l&&l.toUpperCase());const u=i.authMode;if(403===o&&(4===a||s.message&&s.message.toLowerCase().indexOf("ssl")>-1&&-1===s.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==u||498===o)&&-1!==b.indexOf(o)&&!T(e.params.url)&&(403!==o||-1===_.indexOf(l)&&(null==a||2===a&&e.credentialToken))){await C();try{const t=await n.id.getCredential(e.params.url,{error:S("request:server",s,e.params),prompt:"no-prompt"!==u,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===u)return e.credential=null,e.credentialToken=null,!1;s=t}}if(s)throw s;return!0}function A(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.src=e,(0,p.f)(n,e,r,i)}f._abortableFetch=null,f._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"]},71058:(e,t,r)=>{r.d(t,{r:()=>s});var i=r(17452);const n=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function s(e){const t=(0,i.P$)(e,!0);return t&&t.endsWith(".arcgis.com")&&!n.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}},85958:(e,t,r)=>{r.d(t,{f:()=>o});var i=r(80442),n=r(70586),s=r(95330);function o(e,t,r=!1,o){return new Promise(((l,u)=>{if((0,s.Hc)(o))return void u(a());let c=()=>{p(),u(new Error(`Unable to load ${t}`))},h=()=>{const t=e;p(),l(t)},d=()=>{if(!e)return;const t=e;p(),t.src="",u(a())};const p=()=>{(0,i.Z)("esri-image-decode")||(e.removeEventListener("error",c),e.removeEventListener("load",h)),c=null,h=null,e=null,(0,n.pC)(o)&&o.removeEventListener("abort",d),d=null,r&&URL.revokeObjectURL(t)};(0,n.pC)(o)&&o.addEventListener("abort",d),(0,i.Z)("esri-image-decode")?e.decode().then(h,c):(e.addEventListener("error",c),e.addEventListener("load",h))}))}function a(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}},20682:(e,t,r)=>{r.d(t,{Z:()=>w});var i,n=r(43697),s=r(35454),o=r(10736),a=r(70586),l=r(5600),u=(r(67676),r(80442),r(75215),r(71715)),c=r(52011),h=r(30556),d=r(35671);let p=i=class extends o.wq{async collectRequiredFields(e,t){return(0,d.io)(e,t,this.expression)}clone(){return new i({expression:this.expression,title:this.title})}};(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],p.prototype,"expression",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],p.prototype,"title",void 0),p=i=(0,n._)([(0,c.j)("esri.layers.support.FeatureExpressionInfo")],p);const f=p;var m=r(99282);const g=function(){const e=Object.keys(m.a);return e.sort(),e}();var y;const b=(0,s.wY)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),_=new s.Xn({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let v=y=class extends o.wq{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):(0,a.pC)(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new y({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};(0,n._)([(0,l.Cb)({type:f,json:{write:!0}})],v.prototype,"featureExpressionInfo",void 0),(0,n._)([(0,u.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],v.prototype,"readFeatureExpressionInfo",null),(0,n._)([(0,h.c)("featureExpressionInfo",{featureExpressionInfo:{type:f},"featureExpression.value":{type:[0]}})],v.prototype,"writeFeatureExpressionInfo",null),(0,n._)([(0,l.Cb)({type:b.apiValues,nonNullable:!0,json:{type:b.jsonValues,read:b.read,write:{writer:b.write,isRequired:!0}}})],v.prototype,"mode",null),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],v.prototype,"offset",void 0),(0,n._)([(0,l.Cb)({type:g,json:{type:String,read:_.read,write:_.write}})],v.prototype,"unit",null),v=y=(0,n._)([(0,c.j)("esri.layers.support.ElevationInfo")],v);const w=v},17662:(e,t,r)=>{r.d(t,{c:()=>n});var i=r(99001);class n{constructor(){this.id=(0,i.D)()}unload(){}}},11726:(e,t,r)=>{r.d(t,{hu:()=>n}),r(22021),r(52138),r(4307),r(97323),r(65617),r(98766),(0,r(88669).c)();class i{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function n(e,t){if(!e){t=t||"assert";const e=new Error(t);throw e.stack&&console.log(e.stack),new i(t)}}},84094:(e,t,r)=>{r.d(t,{lr:()=>s,PD:()=>a,U_:()=>o});var i=r(70586),n=(r(52138),r(13598));function s(e,t){return(0,i.Wi)(e)&&(e=[]),e.push(t),e}function o(e,t){if((0,i.Wi)(e))return null;const r=e.filter((e=>e!==t));return 0===r.length?null:r}function a(e){return!!(0,i.pC)(e)&&!e.visible}r(11726),r(9820),new Float64Array(3),new Float32Array(6),(0,n.c)()},9820:(e,t,r)=>{function i(e,t,r){for(let i=0;i<r;++i)t[2*i]=e[i],t[2*i+1]=e[i]-t[2*i]}function n(e,t,r,n){for(let a=0;a<n;++a)s[0]=e[a],i(s,o,1),t[a]=o[0],r[a]=o[1]}r.d(t,{po:()=>n});const s=new Float64Array(1),o=new Float32Array(2)}}]);