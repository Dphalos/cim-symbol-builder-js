{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/support/floorFilterUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js"],"names":["d","s","i","l","r","EventedMixin","t","constructor","e","super","this","layer","parent","initialize","when","catch","name","id","title","o","getLogger","declaredClass","error","n","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","a","prototype","readOnly","type","Boolean","p","u","arguments","left","right","top","bottom","clone","_get","Number","String","json","write","y","base","key","typeMap","extent","m","polygon","c","geometry","types","read","path","ofType","rect","h","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","destroy","detach","remove","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","_set","update","isRendering","scale","set","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","dataChanged","doRefresh","floorInfo","floorField","floors","definitionExpression","length","filter","map","push","join","xoffset","Math","max","abs","yoffset","size","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","x","xmin","min","ymin","xmax","ymax","async","popupTemplate","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","has","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","where","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","writeWhere","enable","createQuery","source","reader","target","writer","from","overridePolicy","isAggregate","getEffectivePopupTemplate","sourceLayer","featureReduction","popupEnabled","getObjectId","objectId","cloneProperties","includedEffect","excludedEffect","excludedLabelsVisible","some","globalId","values","delete","_hasGlobalIds","_queueProcessor","concurrency","process","clear","last","finally","popLast","_mergeEdits","addedFeatures","deletedFeatures","updatedFeatures","edits","addOrModified","removed","_startupResolver","isReady","_controller","AbortController","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","query","params","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","_releaseTile","tileKeys","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","pool","release","hasMissingTiles","added","_getTile","_addPlaceholderChildren","_addPlaceholderParent","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","_","P","_updatingRequiredFieldsPromise","requiredFields","_handleRequiredFieldsChange","outFields","highlight","Error","returnGeometry","outSpatialReference","v","R","intersection","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","_loadArcadeModules","j","_updateRequiredFields","orderBy","collectRequiredFields","F","w","g","timeInfo","startField","endField","b","subtypeField","sublayers","Promise","all","displayField","sort","validateFetchPopupFeatures","clientGraphics","q","createPopupQuery","arcadeUtils","hasGeometryOperations","E","attributes","concat","features","geometryType","I","returnZ","returnM","isEmpty","W","X","Y","z","Q","O","B","_pipelineIsUpdating","_commandsQueue","N","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","excluded","_updateClusterSizeTask","_initProxy","_initServiceOptions","valueRanges","isTable","_createClientOptions","k","_createServiceOptions","_serviceOptions","orderByFields","items","labelingInfo","labelsVisible","availableFields","gdbVersion","historicMoment","getTime","JSON","stringify","customParameters","apiKey","geometryDefinition","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","hasHighlight","hitTest","_hitTest","getAggregates","fromJSON","queryStatistics","querySummaryStatistics","_cleanUpQuery","queryUniqueValues","queryClassBreaks","queryFeaturesJSON","U","_setLayersForFeature","count","M","setVisibility","_update","_tileStrategy","updateTiles","timeline","record","J","_acquireTile","featuresTilingScheme","_edit","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","popup","fetchClientPopupFeatures","_fetchServicePopupFeatures","createFetchPopupFeaturesQueryGeometry","A","console","log","setUpdating","emitEvent","emit","capabilities","supportsPagination","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","H","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","_detectQueryMode","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","_validateEdit","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","stage","resourceManager","_createConfiguration","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","effects","onConfigUpdate","startup","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","_createUpdateClusterSizeTask","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","V","L","_aggregateValueRanges","aggregateFields","once","default","layerView","install","_createFeatureDataHash","getAttributeHash","_injectOverrides","_addFloorFilterClause","S","viewAllLevelIds","replace","RegExp","trim","C","T","$","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","token","_createHittestResult","K","getFeature","getAggregate","referenceId","Z"],"mappings":"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","file":"static/js/10.637b6d99.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as n}from\"../../core/maybe.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(l(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){return n(this.get(\"layer.opacity\"),1)*n(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);const t=e;export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);const p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([e({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),r([e({readOnly:!0})],c.prototype,\"version\",null),c=y=r([o(\"esri.views.layers.support.Geometry\")],c);const a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([s({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([s({readOnly:!0})],e.prototype,\"version\",null),e=r([o(\"esri.views.layers.support.Path\")],e);const p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as o}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new o),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,a=!r;!s&&t<=i&&(s=!0),!a&&t>=r&&(a=!0),e=s&&a}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([a(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{r.dataChanged&&this.doRefresh().catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction o(o){var n;const l=o.layer;if(\"floorInfo\"in l&&null!=(n=l.floorInfo)&&n.floorField&&\"floors\"in o.view){return r(o.view.floors,l.floorInfo.floorField)}return null}function n(o,n){var l;return\"floorInfo\"in n&&null!=(l=n.floorInfo)&&l.floorField?r(o,n.floorInfo.floorField):null}function l(o,n){const{definitionExpression:l}=n;return o?l?`(${l}) AND (${o})`:o:l}function r(o,n){if(null==o||!o.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{l as combineFloorsDefinitionExpression,o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../geometry.js\";import r from\"../../TimeExtent.js\";import{JSONMap as i}from\"../../core/jsonMap.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{clone as o}from\"../../core/lang.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../geometry/support/jsonUtils.js\";import c from\"../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.layers.support.FeatureFilter\")],h);const y=h;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/arrayUtils.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);const c=s;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:o,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([s(\"esri.views.layers.support.FeatureEffect\")],c);const l=c;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var s;return null!=(s=e.objectId)?s:e.globalId}))}function a(e,s){const r=new Set(e);for(const t of s.values())r.add(t);return r}function i(e,s){const r=new Set(e);for(const t of s.values())r.delete(t);return r}let u=class extends s{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const s=this._queueProcessor,r=s.last();switch(e.type){case\"update\":case\"refresh\":if((null==r?void 0:r.type)===e.type)return;s.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==r?void 0:r.type)?r:null;t&&s.popLast();const o=this._mergeEdits(t,e);for(const e of o)s.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,s){var r,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=s.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(r=null==e?void 0:e.edits.addOrModified)?r:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([r({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,ignoreAbortErrors as s,throwIfNotAbortError as o}from\"../../../../core/promiseUtils.js\";import{open as i}from\"../../../../core/workers/workers.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";function c(t){return Array.isArray(t)}let l=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=new AbortController,this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=c(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,s(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryUniqueValues(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryUniqueValues\",{query:t.toJSON(),params:e},r)}async queryClassBreaks(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryClassBreaks\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await i(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){o(e)}}};t([n()],l.prototype,\"isReady\",void 0),t([n()],l.prototype,\"client\",void 0),t([n()],l.prototype,\"tileRenderer\",null),l=t([a(\"esri.views.2d.layers.support.FeatureLayerProxy\")],l);const u=l;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as l,on as n}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import d from\"../../layers/support/FeatureEffect.js\";import m from\"../../layers/support/FeatureFilter.js\";import{fixFields as c,unpackFieldNames as f,collectLabelingFields as y,collectElevationFields as h,collectFilterFields as F,collectFeatureReductionFields as w,collectOrderByInfos as g,collectFields as x,collectField as b,featureHasFields as E}from\"../../layers/support/fieldUtils.js\";import v from\"../../rest/support/Query.js\";import{loadArcade as j}from\"../../support/arcadeOnDemand.js\";import{getFetchPopupTemplate as q,getRequiredFields as I}from\"./support/popupUtils.js\";import{getFloorFilterClause as R}from\"../support/floorFilterUtils.js\";const _=r.getLogger(\"esri.views.layers.FeatureLayerView\"),P=r=>{let P=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){l(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),n(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),n(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?c(t,[...f(t,e.outFields),...r]):c(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){_.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new v(e);if(\"feature\"===this.layer.type){const e=R(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return j()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,l=\"renderer\"in t&&t.renderer,n=\"orderBy\"in t&&t.orderBy,a=t.featureReduction,u=new Set,p=await o([l?l.collectRequiredFields(u,r):null,y(u,t),e?h(u,t):null,i(this.filter)?F(u,t,this.filter):null,this.effect?F(u,t,this.effect.filter):null,a?w(u,t,a):null,n?g(u,t,n):null]);if(t.timeInfo&&this.timeExtent&&x(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&x(u,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){b(u,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(u,r),y(u,e)])}));await o(e)}for(const i of p)i.error&&_.error(i.error);b(u,r,s),e&&\"displayField\"in t&&t.displayField&&b(u,r,t.displayField);const d=Array.from(u).sort();this._set(\"requiredFields\",d)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const l of t){const{layer:t}=l;if(!(\"popupEnabled\"in t))continue;const n=f(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!E(n,l)?s.push(l):r.push(l)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const l of o){if(!(\"popupEnabled\"in l))continue;const t=q(l,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),n=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!n);const a=await I(this.layer,t);for(const e of a)r.add(e)}if(t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=R(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],P.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],P.prototype,\"availableFields\",null),e([a({type:d})],P.prototype,\"effect\",void 0),e([a({type:m})],P.prototype,\"filter\",void 0),e([a(p)],P.prototype,\"timeExtent\",void 0),e([a()],P.prototype,\"layer\",void 0),e([a({type:Number})],P.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],P.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],P.prototype,\"requiredFields\",void 0),e([a()],P.prototype,\"suspended\",void 0),e([a()],P.prototype,\"view\",void 0),P=e([u(\"esri.views.layers.FeatureLayerView\")],P),P};export{P as FeatureLayerView,P as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,unwrap as c,isNone as p}from\"../../../core/maybe.js\";import{debounce as y,eachAlwaysValues as f,isAbortError as g,after as m}from\"../../../core/promiseUtils.js\";import{init as _,whenFalseOnce as v}from\"../../../core/watchUtils.js\";import{property as b}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as R}from\"../../../core/accessorSupport/decorators/subclass.js\";import x from\"../../../layers/effects/EffectList.js\";import w from\"../../../layers/support/FeatureEffect.js\";import S from\"../../../layers/support/FeatureFilter.js\";import{calculateTolerance as F}from\"../../../renderers/support/clickToleranceUtils.js\";import U from\"../../../rest/support/FeatureSet.js\";import I from\"../../../rest/support/Query.js\";import{MAX_FILTERS as C}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as O}from\"./LayerView2D.js\";import{createSchema as T}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as E}from\"./features/tileRenderers.js\";import{computePxBuffer as j}from\"./features/support/pixelBuffering.js\";import{findSizeVV as q,createClusterCountSizeVariable as P,isClusterCompatibleRenderer as V,createClusterRenderer as L}from\"./support/clusterUtils.js\";import N from\"./support/FeatureCommandQueue.js\";import k from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as H}from\"./support/util.js\";import{TileManager as J}from\"../tiling/TileManager.js\";import{FeatureLayerView as z}from\"../../layers/FeatureLayerView.js\";import B from\"../../layers/LayerView.js\";import{RefreshableLayerView as Q}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as A}from\"../../support/drapedUtils.js\";import $ from\"../../webgl/capabilities.js\";import M from\"../../../geometry/Extent.js\";const G=2147483648,D=1,K=e=>(e&G)>>>31===D;function W(e){return e&&\"openPorts\"in e}const X=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let Y=class extends(z(Q(O(B)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new N({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=y((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new x,excluded:new x}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),_(this,\"effect\",(e=>{this.effectLists.included.effect=c(null==e?void 0:e.includedEffect)})),_(this,\"effect\",(e=>{this.effectLists.excluded.effect=c(null==e?void 0:e.excludedEffect)}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new k({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,u=\"apiKey\"in t?t.apiKey:void 0,c=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,p=JSON.stringify(this.clips),y=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:c,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:p,featureReduction:y,customParameters:h,apiKey:u})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}async queryUniqueValues(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(e),r,i)}async queryClassBreaks(e,t,i){const r={...t,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=U.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:M.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new J({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(_(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return f([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=F({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return A(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=c(this.layer.fullExtent),a=null==s?void 0:s.clone().intersection(r),l=d(a)?a.width*a.height:0,o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){X.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=d(t.fullExtent)&&t.fullExtent.toJSON(),n=H(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u=\"feature\"===t.type?t.globalIdField:null;let c;\"ogc-feature\"===t.type?c=t.source.getFeatureDefinition():W(t.source)?c=await t.source.openPorts():t.parsedUrl&&(c=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(c.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const p=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(c);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&d(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:p,subtypeField:y,featureCount:g,globalIdField:u,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:c,timeInfo:o,spatialReference:h,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=I.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(X.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=H(this.layer.geometryType),n=await j(r,a,this.container.stage.resourceManager,this.layer.fields,this.layer.spatialReference,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&W(i.source)&&(e.source=await i.source.openPorts()),\"stream\"===i.type&&await this._initServiceOptions(),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){g(e)||X.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){g(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){g(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=q(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=P(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&V(e)){const i=t,r=[],s=L(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await E(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new S;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(C),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=T(e);if(p(l))return null;const o=$();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!$().supportsTextureFloat)||(X.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),v(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{g(e)||X.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{g(e)||X.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await m(1),null;const a=s[0];if(!K(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([b()],Y.prototype,\"_serviceOptions\",void 0),e([b()],Y.prototype,\"_proxy\",void 0),e([b()],Y.prototype,\"_pipelineIsUpdating\",void 0),e([b()],Y.prototype,\"_effectiveRenderer\",void 0),e([b()],Y.prototype,\"_aggregateValueRanges\",void 0),e([b()],Y.prototype,\"_commandsQueue\",void 0),e([b()],Y.prototype,\"labelsVisible\",null),e([b({type:S})],Y.prototype,\"filter\",void 0),e([b({type:w})],Y.prototype,\"effect\",null),e([b({readOnly:!0})],Y.prototype,\"effects\",null),e([b({readOnly:!0})],Y.prototype,\"queryMode\",null),e([b()],Y.prototype,\"renderingConfigHash\",null),e([b()],Y.prototype,\"tileRenderer\",void 0),e([b()],Y.prototype,\"updating\",void 0),Y=e([R(\"esri.views.2d.layers.FeatureLayerView2D\")],Y);const Z=Y;export{Z as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n"],"sourceRoot":""}