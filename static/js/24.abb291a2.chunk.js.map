{"version":3,"sources":["../node_modules/@arcgis/core/views/webgl/Texture.js","../node_modules/@arcgis/core/views/webgl/enums.js","../node_modules/@arcgis/core/views/webgl/checkWebGLError.js","../node_modules/@arcgis/core/views/webgl/programUtils.js","../node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js","../node_modules/@arcgis/core/views/webgl/ProgramCache.js","../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js","../node_modules/@arcgis/core/views/webgl.js"],"names":["o","constructor","t","e","i","this","_context","type","_glName","_descriptor","_samplingModeDirty","_wrapModeDirty","instanceCounter","increment","a","Texture","target","samplingMode","wrapMode","flipped","hasMipmap","isOpaque","unpackAlignment","preMultiplyAlpha","setDataCubeMap","setData","dispose","gl","unbindTextureAllUnits","deleteTexture","decrement","release","resize","width","height","r","createTexture","p","bindTexture","TEXTURE_UNIT_FOR_UPDATES","h","_validateTexture","pixelStorei","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","l","pixelFormat","d","internalFormat","_deriveInternalFormat","dataType","ImageData","HTMLImageElement","HTMLCanvasElement","HTMLVideoElement","s","videoWidth","videoHeight","texImage2D","generateMipmap","console","error","DEPTH24_STENCIL8","DEPTH_STENCIL","n","Math","round","log","max","LN2","levels","length","min","compressedTexImage2D","_applySamplingMode","_applyWrapMode","_applyAnisotropicFilteringParameters","updateData","texSubImage2D","setSamplingMode","setWrapMode","applyChanges","webglVersion","Error","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","capabilities","textureFilterAnisotropic","texParameterf","TEXTURE_MAX_ANISOTROPY","maxAnisotropy","Buffer","VAO","VertexShader","FragmentShader","Program","Framebuffer","Renderbuffer","COUNT","f","getLogger","u","c","getError","INVALID_ENUM","INVALID_VALUE","INVALID_OPERATION","INVALID_FRAMEBUFFER_OPERATION","OUT_OF_MEMORY","CONTEXT_LOST_WEBGL","stack","message","toFixed","options","value","shaders","vertexShader","fragmentShader","attributes","window","WebGL2RenderingContext","_programCacheByTemplate","Map","_rctx","forEach","programs","getProgram","has","addProgramTemplate","getProgramTemplateInstance","set","get","JSON","stringify","readFile","resolveIncludes","resolve","read","exec","push","path","start","index","slice"],"mappings":"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","file":"static/js/24.abb291a2.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isPowerOfTwo as t}from\"../../core/mathUtils.js\";import{isSome as e}from\"../../core/maybe.js\";import{checkWebGLError as i}from\"./checkWebGLError.js\";import{ResourceType as a}from\"./enums.js\";import r from\"./capabilities/isWebGL2Context.js\";const s=4;class o{constructor(t,e,i=null){this._context=t,this.type=\"texture\",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(a.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},34067===this._descriptor.target?this.setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(a.Texture,this))}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null))}setDataCubeMap(t=null){for(let e=34069;e<=34074;e++)this.setData(t,e)}setData(t,a=3553){if(!this._context||!this._context.gl)return;const r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||s,this._descriptor.height=this._descriptor.height||s);const p=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES),h=this._descriptor;o._validateTexture(this._context,h),r.pixelStorei(r.UNPACK_ALIGNMENT,h.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha?1:0);const l=h.pixelFormat;let d=h.internalFormat?h.internalFormat:this._deriveInternalFormat(l,h.dataType);if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let e=t.width,s=t.height;t instanceof HTMLVideoElement&&(e=t.videoWidth,s=t.videoHeight),h.width&&h.height,r.texImage2D(a,0,d,l,h.dataType,t),i(r),h.hasMipmap&&this.generateMipmap(),void 0===h.width&&(h.width=e),void 0===h.height&&(h.height=s)}else{null!=h.width&&null!=h.height||console.error(\"Width and height must be specified!\"),r.DEPTH24_STENCIL8&&d===r.DEPTH_STENCIL&&(d=r.DEPTH24_STENCIL8);let s=h.width,o=h.height;if(n(t)){const e=Math.round(Math.log(Math.max(s,o))/Math.LN2)+1;h.hasMipmap=h.hasMipmap&&e===t.levels.length;for(let i=0;;++i){const e=t.levels[Math.min(i,t.levels.length-1)];if(r.compressedTexImage2D(a,i,d,s,o,0,e),1===s&&1===o||!h.hasMipmap)break;s=Math.max(1,s>>1),o=Math.max(1,o>>1)}}else if(e(t))r.texImage2D(a,0,d,s,o,0,l,h.dataType,t),i(r),h.hasMipmap&&this.generateMipmap();else for(let t=0;r.texImage2D(a,t,d,s,o,0,l,h.dataType,null),i(r),(1!==s||1!==o)&&h.hasMipmap;++t)s=Math.max(1,s>>1),o=Math.max(1,o>>1)}o._applySamplingMode(r,this._descriptor),o._applyWrapMode(r,this._descriptor),o._applyAnisotropicFilteringParameters(this._context,this._descriptor),i(r),this._context.bindTexture(p,o.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,e,i,a,r,s,n=3553){s||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const p=this._context.gl,h=this._descriptor,l=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES);(e<0||i<0||a>h.width||r>h.height||e+a>h.width||i+r>h.height)&&console.error(\"An attempt to update out of bounds of the texture!\"),p.pixelStorei(p.UNPACK_ALIGNMENT,h.unpackAlignment),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha?1:0),s instanceof ImageData||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement?p.texSubImage2D(n,t,e,i,h.pixelFormat,h.dataType,s):p.texSubImage2D(n,t,e,i,a,r,h.pixelFormat,h.dataType,s),this._context.bindTexture(l,o.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,o._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(t.target),this._context.bindTexture(e,o.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,o._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(o._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(o._applyWrapMode(t,e),this._wrapModeDirty=!1)}_deriveInternalFormat(t,e){if(\"webgl\"===this._context.webglVersion)return t;if(5126===e)switch(t){case 6408:return 34836;case 6407:return 34837;default:throw new Error(\"Unable to derive format\")}return t}static _validateTexture(e,i){(i.width<0||i.height<0)&&console.error(\"Negative dimension parameters are not allowed!\");const a=t(i.width)&&t(i.height);r(e.gl)||a||(\"number\"==typeof i.wrapMode?33071!==i.wrapMode&&console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"):33071===i.wrapMode.s&&33071===i.wrapMode.t||console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"),i.hasMipmap&&console.error(\"Mipmapping requires power-of-two textures!\"))}static _applySamplingMode(t,e){let i=e.samplingMode,a=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(a=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(a=9728)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,a)}static _applyWrapMode(t,e){\"number\"==typeof e.wrapMode?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){var i;const a=t.capabilities.textureFilterAnisotropic;if(!a)return;t.gl.texParameterf(e.target,a.TEXTURE_MAX_ANISOTROPY,null!=(i=e.maxAnisotropy)?i:1)}}function n(t){return e(t)&&\"type\"in t&&\"compressed\"===t.type}o.TEXTURE_UNIT_FOR_UPDATES=0;export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst e=33984;var r;!function(e){e[e.Texture=0]=\"Texture\",e[e.Buffer=1]=\"Buffer\",e[e.VAO=2]=\"VAO\",e[e.VertexShader=3]=\"VertexShader\",e[e.FragmentShader=4]=\"FragmentShader\",e[e.Program=5]=\"Program\",e[e.Framebuffer=6]=\"Framebuffer\",e[e.Renderbuffer=7]=\"Renderbuffer\",e[e.COUNT=8]=\"COUNT\"}(r||(r={}));const f=33306;export{e as BASE_TEXTURE_UNIT,f as DepthStencilAttachment,r as ResourceType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/has.js\";import t from\"../../core/Logger.js\";const n=t.getLogger(\"esri/views/webgl\");function o(e,r){switch(r){case e.INVALID_ENUM:return\"Invalid Enum. An unacceptable value has been specified for an enumerated argument.\";case e.INVALID_VALUE:return\"Invalid Value. A numeric argument is out of range.\";case e.INVALID_OPERATION:return\"Invalid Operation. The specified command is not allowed for the current state.\";case e.INVALID_FRAMEBUFFER_OPERATION:return\"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.\";case e.OUT_OF_MEMORY:return\"Out of memory. Not enough memory is left to execute the command.\";case e.CONTEXT_LOST_WEBGL:return\"WebGL context has been lost\";default:return\"Unknown error\"}}const a=!!r(\"enable-feature:webgl-debug\");function u(){return a}function c(){return a}function s(r){if(u()){const t=r.getError();if(t){const a=o(r,t),u=(new Error).stack;n.error(new e(\"webgl-error\",\"WebGL error occured\",{message:a,stack:u}))}}}export{s as checkWebGLError,a as hasFeatureFlagWebGLDebug,u as webglDebugEnabled,c as webglValidateShadersEnabled};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Program as e}from\"./Program.js\";function n(e){let n=\"\";for(const t in e){const o=e[t];if(\"boolean\"==typeof o)o&&(n+=`#define ${t}\\n`);else if(\"number\"==typeof o)n+=`#define ${t} ${o.toFixed()}\\n`;else if(\"object\"==typeof o){const e=o.options;let r=0;for(const t in e)n+=`#define ${e[t]} ${(r++).toFixed()}\\n`;n+=`#define ${t} ${e[o.value]}\\n`}}return n}function t(n,t,o,r){o=o||{},r=r||\"\";const f=\"function\"==typeof t.shaders?t.shaders(o):t.shaders;return new e(n,r+f.vertexShader,r+f.fragmentShader,t.attributes)}export{t as createProgram,n as glslifyDefineMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction n(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{createProgram as r}from\"./programUtils.js\";class t{constructor(r){this._programCacheByTemplate=new Map,this._rctx=r}dispose(){this._programCacheByTemplate.forEach((r=>r.programs.forEach((r=>r.dispose())))),this._programCacheByTemplate=null}getProgram(t,a){return this._programCacheByTemplate.has(t)||this.addProgramTemplate(t,(a=>r(this._rctx,t,a))),this.getProgramTemplateInstance(t,a)}addProgramTemplate(r,t){this._programCacheByTemplate.set(r,{constructor:t,programs:new Map})}getProgramTemplateInstance(r,t){const a=this._programCacheByTemplate.get(r);if(a){const r=t?JSON.stringify(t):\"default\";if(!a.programs.has(r)){const e=a.constructor(t);a.programs.set(r,e)}return a.programs.get(r)}return null}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.readFile=e}resolveIncludes(e){return this.resolve(e)}resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this.read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\\S\\n]*#include\\s+<(\\S+)>[^\\S\\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h=\"\";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?\"\":this.resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}read(e){return this.readFile(e)}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nexport{default as BufferObject}from\"./webgl/BufferObject.js\";export{default as FramebufferObject}from\"./webgl/FramebufferObject.js\";export{Program}from\"./webgl/Program.js\";export{default as ProgramCache}from\"./webgl/ProgramCache.js\";export{default as Renderbuffer}from\"./webgl/Renderbuffer.js\";export{default as ShaderCompiler}from\"./webgl/ShaderCompiler.js\";export{default as Texture}from\"./webgl/Texture.js\";export{default as VertexArrayObject}from\"./webgl/VertexArrayObject.js\";export{createProgram,glslifyDefineMap}from\"./webgl/programUtils.js\";export{createContextOrErrorHTML}from\"./webgl/context-util.js\";\n"],"sourceRoot":""}